"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{1833:function(e,t,s){var r=s(5893);s(7294),t.Z=()=>(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-8 py-[18px] mb-8",style:{background:"linear-gradient(250deg, rgba(165, 31, 227, 0.15) 9.5%, rgba(25, 90, 254, 0.15) 26%, rgba(255, 255, 255, 0.15) 52%), #ffffff"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsxs)("svg",{width:"97",height:"99",viewBox:"0 0 97 99",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{filter:"url(#filter0_d_376_20980)",children:[(0,r.jsx)("path",{d:"M81.0432 70.6001L48.5671 86.4998V48.0668L84.3882 30.1562V65.238C84.3882 67.5174 83.0904 69.5978 81.0432 70.6001Z",fill:"url(#paint0_linear_376_20980)"}),(0,r.jsx)("path",{d:"M48.5672 86.5V48.067L12.7461 29.4102V65.7038C12.7461 67.6982 13.8817 69.5186 15.673 70.3956L48.5672 86.5Z",fill:"url(#paint1_linear_376_20980)"}),(0,r.jsx)("path",{d:"M84.3884 30.5299L48.5674 48.0674L12 29.0374L43.9484 13.5573C46.6289 12.2585 49.7553 12.2619 52.4319 13.5686C63.5414 18.9924 80.2031 27.1313 81.7765 27.918C83.5675 28.8135 84.2641 30.0324 84.3884 30.5299Z",fill:"white"}),(0,r.jsx)("path",{d:"M25.4327 36.6031V47.2333C25.4327 47.5159 25.5924 47.7743 25.8453 47.9007L33.308 51.6321C33.8042 51.8802 34.388 51.5194 34.388 50.9646V41.0618C34.388 40.7814 34.5452 40.5246 34.795 40.3971L70.2091 22.3212L63.1195 18.5898L25.8642 35.9265C25.601 36.0489 25.4327 36.3129 25.4327 36.6031Z",fill:"#E0EDFF"}),(0,r.jsx)("path",{d:"M25.4327 37.3335V47.232C25.4327 47.5146 25.5924 47.7731 25.8453 47.8995L33.308 51.6308C33.8042 51.8789 34.388 51.5181 34.388 50.9633V41.0648C34.388 40.7822 34.2283 40.5238 33.9755 40.3973L26.5128 36.666C26.0166 36.4179 25.4327 36.7787 25.4327 37.3335Z",fill:"#CBE1FF"})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_d_376_20980",x:"0",y:"-0.5",width:"96.3884",height:"99",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"6"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.719201 0 0 0 0 0.8128 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_376_20980"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_376_20980",result:"shape"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_376_20980",x1:"84.3882",y1:"68.5893",x2:"48.5671",y2:"47.6936",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#ECF3FD"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#EFF3FE"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_376_20980",x1:"12.7461",y1:"69.3357",x2:"48.5672",y2:"47.6938",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#EBF2FF"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#F7F9FE"})]})]})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cross Retail Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Compare your brand's performance across different retailers and identify opportunities for growth."})]})]}),(0,r.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-full flex items-center gap-2 hover:bg-blue-700",children:(0,r.jsx)("span",{children:"Learn More"})})]})})},6420:function(e,t,s){s.d(t,{Z:function(){return components_KPIRow}});var r=s(5893),a=s(7294),l=s(3646),KPICards_TrafficShareCard=e=>{let{onNavigateToTab:t}=e,s=(0,a.useRef)(null),[n,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=s.current;if(!e)return;let measure=()=>{i(e.clientWidth)};measure();let t=null;return"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(measure)).observe(e),()=>{t&&t.disconnect()}},[]),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 px-6 pt-4 pb-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium text-gray-900 leading-5",children:"My Brand Traffic Share"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 leading-4",children:"Brand views trend"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 px-6 pb-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl font-medium text-gray-900 tracking-wide",children:"24.3K"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2 py-0.5 rounded-full",children:"+2.2%"})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"3 May - 30 Jul"})]}),(0,r.jsx)("div",{ref:s,className:"w-full mb-4",style:{height:"64px"},children:n>0&&(0,r.jsx)(l.Sparklines,{data:[15,10,5,20,8,15],width:n,height:64,margin:2,min:0,max:30,preserveAspectRatio:"none",children:(0,r.jsx)(l.SparklinesLine,{color:"blue"})})})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-4 text-center",children:(0,r.jsx)("button",{className:"text-blue-600 text-sm hover:text-blue-700",onClick:()=>null==t?void 0:t("brand-performance"),children:"View detailed traffic analysis"})})]})]})},KPICards_LeadingRetailersCard=e=>{let{onNavigateToTab:t}=e;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 px-6 pt-4 pb-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium text-gray-900 leading-5",children:"Leading Retailers in category by Views"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 leading-4",children:"Category views split by retailer"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 px-6 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",style:{height:"136px"},children:[(0,r.jsx)("div",{className:"w-[105px] h-[105px]",children:(0,r.jsx)("img",{src:"/assets/a644a1d71ad8cc9cf565e595fd6501551f1f4ef9.svg",alt:"Retailer chart",className:"w-full h-full"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[9px] h-[9px]",children:(0,r.jsx)("img",{src:"/assets/01e295c52274f3848620593ef43c0094ba9d21fd.svg",alt:"",className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:"35%"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Amazon.com"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"1M"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"+12%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[9px] h-[9px]",children:(0,r.jsx)("img",{src:"/assets/08f4a05d46d0b4a00f0baec4e42bd7c69dd61cb6.svg",alt:"",className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:"25%"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Walmart.com"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"714K"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"+8%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[9px] h-[9px]",children:(0,r.jsx)("img",{src:"/assets/c47addf3e686f1568df327e0c31664782f3eb468.svg",alt:"",className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:"20%"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Bestbuy.com"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"571K"}),(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"-3%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[9px] h-[9px]",children:(0,r.jsx)("img",{src:"/assets/3919bd618661a0f02c6ed8d1faa60217015ee892.svg",alt:"",className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:"10%"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Ebay.com"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"286K"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"+5%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-[9px] h-[9px]",children:(0,r.jsx)("img",{src:"/assets/5539226077f9ec8c8a3a63adbed9ef313903da99.svg",alt:"",className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:"10%"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Samsung.com"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"286K"}),(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"-7%"})]})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-4 text-center",children:(0,r.jsx)("button",{className:"text-blue-600 text-sm hover:text-blue-700",onClick:()=>null==t?void 0:t("retailer-growth"),children:"Analyze the retailers' change over time"})})]})]})},KPICards_BestRetailerCard=e=>{let{onNavigateToTab:t}=e;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 px-6 pt-4 pb-4",children:[(0,r.jsx)("h3",{className:"text-base font-medium text-gray-900 leading-5",children:"My Best retailer"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 leading-4",children:"Top retailer performance metrics"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 px-6 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900",children:"eBay.com"}),(0,r.jsx)("div",{className:"w-4 h-4",children:(0,r.jsx)("img",{src:"/assets/4c906a76851dd45819a9104dd0fc0f361509528d.svg",alt:"Info icon",className:"w-full h-full"})})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-blue-100 text-blue-600 text-xs font-medium px-0 py-0 rounded w-4 h-4 flex items-center justify-center",children:"1"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"Total Brand Views"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"142K"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"+15%"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-blue-100 text-blue-600 text-xs font-medium px-0 py-0 rounded w-4 h-4 flex items-center justify-center",children:"2"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"Traffic Share"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"21.2%"}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"+1.1PP"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-blue-100 text-blue-600 text-xs font-medium px-0 py-0 rounded w-4 h-4 flex items-center justify-center",children:"3"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"Share of Shelf"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-900",children:"13.3%"}),(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"-3.1PP"})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-4 text-center",children:(0,r.jsx)("button",{className:"text-blue-600 text-sm hover:text-blue-700",onClick:()=>null==t?void 0:t("opportunity-matrix"),children:"Search for additional retailers to consider"})})]})]})},components_KPIRow=e=>{let{onNavigateToTab:t}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8 items-start",children:[(0,r.jsx)(KPICards_TrafficShareCard,{onNavigateToTab:t}),(0,r.jsx)(KPICards_LeadingRetailersCard,{onNavigateToTab:t}),(0,r.jsx)(KPICards_BestRetailerCard,{onNavigateToTab:t})]})}},1179:function(e,t,s){s.d(t,{Z:function(){return components_MainChart}});var r=s(5893),a=s(7294),l=s(2313),components_ChartLegend=e=>{let{legendRetailers:t,selectedLegendHosts:s,seriesColorByRetailer:a,maxRetailerSelections:l,onRetailerToggle:n,onClearAll:i,onSelectAll:o,formatSkus:d,isLegendItemDisabled:c}=e;return(0,r.jsx)("div",{className:"bg-white h-[347px] rounded border border-[#e6e9ec] w-[254px]",children:(0,r.jsxs)("div",{className:"flex flex-col h-[347px] items-start justify-start overflow-clip p-0 w-[254px]",children:[(0,r.jsx)("div",{className:"h-0 w-full relative",children:(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-[-1px]",children:(0,r.jsx)("img",{alt:"Legend line",className:"w-full h-px",src:"/assets/f1185c9a9f03d441b08c5344c528a7d18dc379f0.svg"})})}),(0,r.jsx)("div",{className:"grow flex flex-col gap-1 items-start justify-start min-h-px min-w-px pb-0 pl-4 pr-0 pt-2 w-full overflow-y-auto",children:t.map(e=>{let t=c(e.name),l=s.includes(e.name);return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm py-1",children:[(0,r.jsx)("input",{type:"checkbox",checked:l,onChange:()=>n(e.name),disabled:t,className:"h-4 w-4 ".concat(t?"opacity-50 cursor-not-allowed":""),style:{accentColor:a[e.name]||"#CBD1D7"}}),(0,r.jsxs)("span",{className:"".concat(t?"opacity-50 cursor-not-allowed":"cursor-pointer hover:text-[#195afe]"," transition-colors"),style:{fontFamily:"Roboto, sans-serif",color:l?"#3a5166":t?"#b6bec6":"#3a5166",fontSize:"14px",lineHeight:"20px"},onClick:()=>!t&&n(e.name),children:[e.name,(0,r.jsxs)("span",{className:"text-[#b6bec6]",children:[" - ",d(e.skus)," SKUs"]})]})]},e.name)})}),(0,r.jsxs)("div",{className:"bg-white flex flex-row h-8 items-start justify-between px-4 py-2 w-full border-t border-[#e6e9ec]",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-1.5 items-start justify-start p-0 text-[12px] leading-4 whitespace-nowrap",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsx)("button",{className:"flex flex-col justify-center text-center transition-opacity cursor-pointer ".concat(0===s.length?"text-gray-400 cursor-not-allowed":"text-[#195afe] hover:opacity-75"),onClick:i,disabled:0===s.length,children:"Clear all"}),(0,r.jsx)("div",{className:"text-left text-[#195afe]",children:"|"}),(0,r.jsx)("button",{className:"flex flex-col justify-center text-center transition-opacity cursor-pointer ".concat(s.length===l?"text-gray-400 cursor-not-allowed":"text-[#195afe] hover:opacity-75"),onClick:o,disabled:s.length===l,children:"Select Top"})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-1.5 items-start justify-start p-0 text-right",style:{fontFamily:"Roboto, sans-serif"},children:[(0,r.jsxs)("div",{className:"text-[12px] leading-[18px] font-normal text-[#6b7c8c] whitespace-nowrap",children:[s.length,"/",l]}),(0,r.jsxs)("div",{className:"flex flex-col h-[18px] justify-end text-[10px] leading-4 font-normal text-[#b6bec6] w-[42px]",children:["Out of ",t.length]})]})]})]})})},components_InsightSection=e=>{let{dynamicInsight:t}=e;return(0,r.jsx)("div",{className:"flex flex-col gap-2.5 items-start justify-start pb-4 pt-0 px-4 w-full",children:(0,r.jsxs)("div",{className:"bg-[#f5f8ff] flex flex-col gap-2 items-start justify-center p-4 rounded-lg w-full h-[101px]",children:[(0,r.jsx)("div",{className:"flex flex-col items-start justify-start p-0 w-full",children:(0,r.jsx)("div",{className:"text-[20px] leading-7 font-bold text-[#092540] text-center w-full",style:{fontFamily:"DM Sans, sans-serif"},children:t.headline})}),(0,r.jsx)("div",{className:"h-0 w-full relative",children:(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-[-1px]",children:(0,r.jsx)("img",{alt:"Line",className:"w-full h-px",src:"/assets/c5f98cc278369be2d380820eb9a00765a4507302.svg"})})}),(0,r.jsx)("div",{className:"text-[14px] leading-5 font-normal text-[#092540] text-center w-full",style:{fontFamily:"DM Sans, sans-serif"},children:(0,r.jsxs)("div",{className:"mb-0",children:[(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:t.sentence}}),t.chips.map((e,t)=>(0,r.jsx)("span",{className:"".concat("pos"===e.tone?"bg-[#e6faf5] text-[#009688]":"neg"===e.tone?"bg-[#ffe6e6] text-[#bb3f3f]":"bg-[#eef2f5] text-[#3a5166]"," text-[10px] font-bold px-2 py-0.5 rounded-full tracking-[0.3px] ml-2"),style:{fontFamily:"DM Sans, sans-serif"},children:e.text},t))]})})]})})},TabContent_BrandShareTab=e=>{let{selectedLegendHosts:t,legendRetailers:s,maxRetailerSelections:a,onRetailerToggle:l,onClearAll:n,onSelectAll:i,formatSkus:o,isLegendItemDisabled:d,seriesColorByRetailer:c,getSeriesForRetailer:x,hoveredDateIdx:u,setHoveredDateIdx:p,setChartHoverPos:m,dynamicInsight:h}=e,f=(()=>{let e=t.map(e=>({host:e,values:x(e)})),r=s.map(e=>e.name),a=Array(7).fill(0);r.forEach(e=>{let t=x(e)||[];for(let e=0;e<7;e++)a[e]+=t[e]||0});let l=e.map(e=>{let{host:t,values:s}=e;return{host:t,values:s.map((e,t)=>{let s=a[t]||0;return s>0?e/s*100:0})}});return l})(),g=(()=>{let e=[],t=Array(7).fill(0);return f.forEach(s=>{let{host:r,values:a}=s,l=a.map((e,s)=>{let r=t[s];return t[s]+=e,{bottom:r,top:t[s],value:e}});e.push({host:r,values:a,stackedValues:l.map(e=>e.top)})}),e})(),b=Array.from({length:7},(e,t)=>f.reduce((e,s)=>{let{values:r}=s;return e+(r[t]||0)},0)),v=Math.ceil(Math.min(100,1.15*Math.max(0,...b))),j=Array.from({length:6},(e,t)=>Math.round(v*t/5)),y=[...j].reverse();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-10 h-[400px] items-start justify-start p-4 w-full",children:[(0,r.jsxs)("div",{className:"grow h-full min-h-px min-w-px relative",children:[(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-col grow items-start justify-between min-h-px min-w-px p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("div",{className:"flex flex-row gap-4 h-px items-center justify-start p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-[11px] leading-4 font-normal text-[#3a5166] text-right w-12",style:{fontFamily:"Roboto, sans-serif"},children:"Share %"})}),(0,r.jsx)("div",{className:"grow flex items-center justify-center min-h-px min-w-px",children:(0,r.jsx)("div",{className:"h-px bg-[#e6e9ec] w-full"})})]})}),y.map((e,t)=>(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("div",{className:"flex flex-row gap-4 h-px items-center justify-start p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-[11px] leading-4 font-normal text-[#3a5166] text-right w-12",style:{fontFamily:"Roboto, sans-serif"},children:[e,"%"]})}),(0,r.jsx)("div",{className:"grow flex items-center justify-center min-h-px min-w-px",children:(0,r.jsx)("div",{className:"h-px w-full ".concat(t===y.length-1?"bg-[#cbd1d7]":"bg-[#e6e9ec]")})})]})},t))]}),(0,r.jsx)("div",{className:"flex flex-row items-start justify-between pl-[72px] pr-0 py-0 w-full",children:["1 Dec","5 Dec","9 Dec","13 Dec","17 Dec","21 Dec","27 Dec"].map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-".concat(0===t?"start":13===t?"end":"center"," justify-start p-0 w-px"),children:[(0,r.jsx)("div",{className:"h-1 w-px bg-[#cbd1d7]"}),(0,r.jsx)("div",{className:"text-[11px] leading-4 font-normal text-[#6b7c8c] text-center whitespace-nowrap",style:{fontFamily:"Roboto, sans-serif"},children:e})]},t))})]}),(0,r.jsx)("div",{className:"absolute bottom-[21px] left-[72px] right-0 top-0",children:t.length>0&&(0,r.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:g.map((e,t)=>{let{host:s,stackedValues:a}=e,l=c[s]||"#CBD1D7",n=a.length,i=n>1?100/(n-1):0,o="0";if(t>0){let e=g[t-1].stackedValues;o=e.map((e,t)=>"".concat(t*i," ").concat(100-e/v*100)).join(" L ")}else o=Array.from({length:n},(e,t)=>"".concat(t*i," 100")).join(" L ");let d=a.map((e,t)=>"".concat(t*i," ").concat(100-e/v*100)).join(" L "),x=o.split(" L ").reverse().join(" L "),u="M ".concat(d," L ").concat(x," Z");return(0,r.jsx)("path",{d:u,fill:l,fillOpacity:1,stroke:"none"},s)})})}),(0,r.jsx)("div",{className:"absolute bottom-[21px] left-[72px] right-0 top-0 z-[10]",onMouseMove:e=>{let t=e.currentTarget,s=t.getBoundingClientRect(),r=e.clientX-s.left;m({x:e.clientX,y:e.clientY});let a=Math.max(0,Math.min(6,Math.round(r/s.width*6)));p(a)},onMouseLeave:()=>p(null),children:null!==u&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-dashed border-[#cbd1d7]",style:{left:"".concat(u/6*100,"%")}})})})]}),(0,r.jsx)(components_ChartLegend,{legendRetailers:s,selectedLegendHosts:t,seriesColorByRetailer:c,maxRetailerSelections:a,onRetailerToggle:l,onClearAll:n,onSelectAll:i,formatSkus:o,isLegendItemDisabled:d})]}),(0,r.jsx)(components_InsightSection,{dynamicInsight:h})]})},TabContent_RetailerGrowthTab=e=>{let{selectedLegendHosts:t,yAxisScale:s,reversedSteps:a,formatSkus:l,getSeriesForRetailer:n,seriesColorByRetailer:i,hoveredDateIdx:o,setHoveredDateIdx:d,setChartHoverPos:c,legendRetailers:x,maxRetailerSelections:u,onRetailerToggle:p,onClearAll:m,onSelectAll:h,isLegendItemDisabled:f,dynamicInsight:g}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-10 h-[400px] items-start justify-start p-4 w-full",children:[(0,r.jsxs)("div",{className:"grow h-full min-h-px min-w-px relative",children:[(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-col grow items-start justify-between min-h-px min-w-px p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("div",{className:"flex flex-row gap-4 h-px items-center justify-start p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-[11px] leading-4 font-normal text-[#3a5166] text-right w-12",style:{fontFamily:"Roboto, sans-serif"},children:"Views"})}),(0,r.jsx)("div",{className:"grow flex items-center justify-center min-h-px min-w-px",children:(0,r.jsx)("div",{className:"h-px bg-[#e6e9ec] w-full"})})]})}),a.map((e,t)=>(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("div",{className:"flex flex-row gap-4 h-px items-center justify-start p-0 w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-[11px] leading-4 font-normal text-[#3a5166] text-right w-12",style:{fontFamily:"Roboto, sans-serif"},children:l(e)})}),(0,r.jsx)("div",{className:"grow flex items-center justify-center min-h-px min-w-px",children:(0,r.jsx)("div",{className:"h-px w-full ".concat(t===a.length-1?"bg-[#cbd1d7]":"bg-[#e6e9ec]")})})]})},t))]}),(0,r.jsx)("div",{className:"flex flex-row items-start justify-between pl-[72px] pr-0 py-0 w-full",children:["1 Dec","3 Dec","5 Dec","7 Dec","9 Dec","11 Dec","13 Dec","15 Dec","17 Dec","19 Dec","21 Dec","23 Dec","25 Dec","27 Dec"].map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-".concat(0===t?"start":13===t?"end":"center"," justify-start p-0 w-px"),children:[(0,r.jsx)("div",{className:"h-1 w-px bg-[#cbd1d7]"}),(0,r.jsx)("div",{className:"text-[11px] leading-4 font-normal text-[#6b7c8c] text-center whitespace-nowrap",style:{fontFamily:"Roboto, sans-serif"},children:e})]},t))})]}),(0,r.jsx)("div",{className:"absolute bottom-[21px] left-[72px] right-0 top-0",children:t.length>0&&(0,r.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:t.map(e=>{let t=n(e);if(!t||0===t.length)return null;let a=s.min,l=s.max,o=Math.max(1,l-a),d=t.length,c=d>1?100/(d-1):0,x=t.map((e,t)=>(0===t?"M":"L")+" "+t*c+" "+(100-100*((e-a)/o))).join(" "),u=i[e]||"#CBD1D7";return(0,r.jsx)("path",{d:x,fill:"none",stroke:u,strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round",vectorEffect:"non-scaling-stroke",shapeRendering:"geometricPrecision"},e)})})}),(0,r.jsx)("div",{className:"absolute bottom-[21px] left-[72px] right-0 top-0 z-[10]",onMouseMove:e=>{let t=e.currentTarget,s=t.getBoundingClientRect(),r=e.clientX-s.left;c({x:e.clientX,y:e.clientY});let a=Math.max(0,Math.min(6,Math.round(r/s.width*6)));d(a)},onMouseLeave:()=>d(null),children:null!==o&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-dashed border-[#cbd1d7]",style:{left:"".concat(o/6*100,"%")}})})})]}),(0,r.jsx)(components_ChartLegend,{legendRetailers:x,selectedLegendHosts:t,seriesColorByRetailer:i,maxRetailerSelections:u,onRetailerToggle:p,onClearAll:m,onSelectAll:h,formatSkus:l,isLegendItemDisabled:f})]}),(0,r.jsx)(components_InsightSection,{dynamicInsight:g})]})},n=s(4613),i=s(9240),o=s(3023),d=s(5048),c=s(7745),x=s(6657),u=s(8081),p=s(4545),m=s(3440),h=s(8933);let percentile=(e,t)=>{if(!e.length)return 0;let s=e.slice().sort((e,t)=>e-t),r=(s.length-1)*t,a=Math.floor(r);return s[a]+(s[Math.min(a+1,s.length-1)]-s[a])*(r-a)},median=e=>percentile(e,.5);function scoreRetailers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{highDemandPercentile:s=.7,lowPresenceThreshold:r=.05,shareCapForScore:a=.3,minDemandFloor:l=1e3}=t,n=e.filter(e=>e.demand_weekly>=l),i=n.map(e=>e.demand_weekly),o=percentile(i,s)||0,d=n.filter(e=>e.brand_share>0).map(e=>e.brand_share),c=d.length?median(d):void 0,x=n.map(e=>{let t=Math.min(e.brand_share,a),s=e.demand_weekly*(1-t),l=void 0!==c?Math.max(0,e.demand_weekly*(c-e.brand_share)):void 0,n="Low priority";return n=e.demand_weekly>=o&&e.brand_share<r?"Opportunity":e.demand_weekly>=o&&e.brand_share>=r?"Performing":e.demand_weekly<o&&e.brand_share>=r?"Over-indexed":"Low priority",{...e,score:s,potential_weekly:l,quadrant:n}});return{scored:x,xThreshold:o,yThreshold:r,targetShare:c}}function rankOpportunities(e,t){let s=e.filter(e=>"Opportunity"===e.quadrant);return s.sort((e,t)=>{var s,r;return(null!==(s=t.potential_weekly)&&void 0!==s?s:-1)-(null!==(r=e.potential_weekly)&&void 0!==r?r:-1)||t.score-e.score||t.demand_weekly-e.demand_weekly})}function buildChannelOpportunityInsight(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pop",r=arguments.length>2?arguments[2]:void 0,a=rankOpportunities(e,r),l=null!==(t=a[0])&&void 0!==t?t:e.slice().sort((e,t)=>t.score-e.score)[0];if(!l)return{title:"No data",text:"Not enough volume to evaluate retailers.",tags:[]};let n="yoy"===s?l.demand_growth_yoy:l.demand_growth_pop,i="yoy"===s?l.brand_share_delta_yoy:l.brand_share_delta_pop,o=void 0!==n?"".concat(n>=0?"+":"").concat((100*n).toFixed(0),"% ").concat(s.toUpperCase()):"",d=void 0!==i?"".concat(i>=0?"+":"").concat((100*i).toFixed(1),"pp ").concat(s.toUpperCase()):"",c=0===l.brand_share&&"Opportunity"===l.quadrant?"High-priority opportunity: ".concat(l.retailerName):"Opportunity"===l.quadrant?"Growth opportunity: ".concat(l.retailerName):"Channel performing: ".concat(l.retailerName),x=void 0!==r&&void 0!==l.potential_weekly?" (~".concat(abbr(l.potential_weekly)," views/week potential at peer-median share)"):"",u=0===l.brand_share?"<strong>Zero brand presence</strong> with <strong>".concat(abbr(l.demand_weekly),"</strong> weekly category demand").concat(x,"."):"Currently <strong>".concat((100*l.brand_share).toFixed(1),"%</strong> share with <strong>").concat(abbr(l.demand_weekly),"</strong> weekly demand").concat(x,".");return{retailerId:l.retailerId,retailerName:l.retailerName,title:c,text:u,tags:[o,d].filter(Boolean)}}function abbr(e){return void 0===e?"":e>=1e9?"".concat((e/1e9).toFixed(1),"B"):e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):"".concat(Math.round(e))}function RetailerOpportunityMatrix(e){let{data:t,mode:s="pop",config:f,colorByRetailer:g,quadrantTitles:b,xAxisLabel:v,yAxisLabel:j,yValueLabel:y,xValueLabel:w,yDomain:N,yTickFormatter:C,xAxisTooltip:k,yAxisTooltip:M,bubbleSizeRange:B}=e,{scored:E}=(0,a.useMemo)(()=>scoreRetailers(t,f),[t,f]),S=E.map(e=>e.brand_views_weekly||0).filter(e=>e>0),[_,F]=null!=B?B:[300,3e3],L=E.map(e=>e.demand_weekly||0).filter(e=>e>0),R=Math.min(...L)||0,A=Math.max(...L)||1,D=.1*(A-R),P=Math.max(0,1e3*Math.floor((R-D)/1e3)),T=1e3*Math.ceil((A+D)/1e3),I=(P+T)/2,z=E.map(e=>Number.isFinite(e.brand_share)?e.brand_share:0),K=z.length?Math.min(...z):-.1,V=z.length?Math.max(...z):.1,W=V-K,U=0===W?Math.max(.05,.1*Math.abs(V)):.1*W,Y=null!=N?N:[Math.floor((K-U)*20)/20,Math.ceil((V+U)*20)/20],O=(Y[0]+Y[1])/2,Z=C||(e=>"".concat((100*e).toFixed(0),"%")),H={topLeft:"Over-indexed",topRight:"Performing",bottomLeft:"Low priority",bottomRight:"Opportunity",...b||{}},[$,G]=(0,a.useState)(!1),[q,X]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"h-[420px] w-full relative",children:[k&&(0,r.jsxs)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 flex items-center gap-1 z-10 pointer-events-auto",children:[(0,r.jsx)("span",{className:"text-[11px] text-[#6b7c8c]",style:{fontFamily:"Roboto, sans-serif"},children:v||"Category demand (views/week)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#6b7c8c] cursor-help hover:text-[#195afe]",onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1)}),$&&(0,r.jsxs)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-80 z-50 pointer-events-none",children:[k,(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})]}),M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute -left-12 top-1/2 transform -translate-y-1/2 z-10 pointer-events-auto",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 -rotate-90 origin-center",children:[(0,r.jsx)("span",{className:"text-[11px] text-[#3a5166]",style:{fontFamily:"Roboto, sans-serif"},children:j||"Brand presence (share)"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#3a5166] cursor-help hover:text-[#195afe]",onMouseEnter:()=>X(!0),onMouseLeave:()=>X(!1)})]})}),q&&(0,r.jsxs)("div",{className:"absolute left-8 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 max-w-xs z-50 pointer-events-none",children:[M,(0,r.jsx)("div",{className:"absolute right-full top-1/2 transform -translate-y-1/2 border-4 border-transparent border-r-gray-900"})]})]}),(0,r.jsx)(n.h,{children:(0,r.jsxs)(i.G,{margin:{top:24,right:24,bottom:24,left:48},children:[(0,r.jsx)(o.K,{type:"number",dataKey:"demand_weekly",name:"Demand (total views)",tickFormatter:abbr,domain:[P,T],tick:{fill:"#6b7c8c",fontSize:11,fontFamily:"Roboto, sans-serif"},axisLine:{stroke:"#cbd1d7"},tickLine:{stroke:"#cbd1d7"},tickMargin:8,children:!k&&(0,r.jsx)(d._,{value:v||"Category demand (views/week)",position:"insideBottom",dy:16,style:{fill:"#6b7c8c",fontSize:"11px",fontFamily:"Roboto, sans-serif"}})}),(0,r.jsx)(c.Q,{type:"number",dataKey:"brand_share",name:"Head-to-head lead",tickFormatter:Z,domain:Y,tick:{fill:"#3a5166",fontSize:11,fontFamily:"Roboto, sans-serif"},axisLine:{stroke:"#cbd1d7"},tickLine:{stroke:"#cbd1d7"},width:56,tickMargin:6,children:!M&&(0,r.jsx)(d._,{value:j||"Brand presence (share)",angle:-90,position:"insideLeft",dx:-8,style:{fill:"#3a5166",fontSize:"11px",fontFamily:"Roboto, sans-serif"}})}),(0,r.jsx)(x.d,{type:"number",dataKey:"brand_views_weekly",range:[_,F],domain:[Math.min(...S)||1,Math.max(...S)||1]}),(0,r.jsx)(u.z,{x1:P,x2:I,y1:O,y2:Y[1],fill:"#F7F7F8",fillOpacity:1}),(0,r.jsx)(u.z,{x1:I,x2:T,y1:Y[0],y2:O,fill:"#F7F7F8",fillOpacity:1}),(0,r.jsx)(p.d,{x:I,stroke:"#cbd5e1",strokeDasharray:"4 4"}),(0,r.jsx)(p.d,{y:O,stroke:"#cbd5e1",strokeDasharray:"4 4"}),(0,r.jsx)("text",{x:"11%",y:"8%",textAnchor:"start",dominantBaseline:"hanging",fill:"#64748b",fontSize:"12",fontFamily:"Roboto, sans-serif",fontWeight:"500",children:H.topLeft}),(0,r.jsx)("text",{x:"97%",y:"8%",textAnchor:"end",dominantBaseline:"hanging",fill:"#64748b",fontSize:"12",fontFamily:"Roboto, sans-serif",fontWeight:"500",children:H.topRight}),(0,r.jsx)("text",{x:"11%",y:"86%",textAnchor:"start",dominantBaseline:"text-after-edge",fill:"#64748b",fontSize:"12",fontFamily:"Roboto, sans-serif",fontWeight:"500",children:H.bottomLeft}),(0,r.jsx)("text",{x:"97%",y:"86%",textAnchor:"end",dominantBaseline:"text-after-edge",fill:"#64748b",fontSize:"12",fontFamily:"Roboto, sans-serif",fontWeight:"500",children:H.bottomRight}),(0,r.jsx)(m.u,{cursor:{strokeDasharray:"3 3"},formatter:(e,t,s)=>"demand_weekly"===t?[abbr(e),w||"Demand (total views)"]:"brand_share"===t?[Z(e),y||"Brand share"]:"brand_views_weekly"===t?[abbr(e),"Brand total views"]:[e,t],labelFormatter:()=>"",content:e=>{let{payload:t}=e,a=t&&t[0]&&t[0].payload;if(!a)return null;"yoy"===s?a.demand_growth_yoy:a.demand_growth_pop,"yoy"===s?a.brand_share_delta_yoy:a.brand_share_delta_pop;let l=g[a.retailerName]||"#60a5fa",n=a.skus;return(0,r.jsxs)("div",{className:"rounded bg-white p-4 text-[12px] shadow-[0px_1px_8px_rgba(9,37,64,0.08),0px_5px_24px_rgba(9,37,64,0.08)] border border-[#E6E9EC] w-[300px]",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:l}}),(0,r.jsx)("div",{className:"text-[#092540] font-medium leading-4",children:a.retailerName})]}),void 0!==n&&(0,r.jsxs)("div",{className:"text-[#3a5166] leading-4",children:[abbr(n)," SKUs"]}),(0,r.jsxs)("div",{className:"mt-1 grid grid-cols-[1fr_auto] gap-x-4 gap-y-2 items-start",children:[(0,r.jsx)("div",{className:"text-[#3a5166] leading-4",children:"Brand Total Views (Bubble size)"}),(0,r.jsx)("div",{className:"text-[#092540] font-bold text-right leading-4",children:abbr(a.brand_views_weekly)}),(0,r.jsx)("div",{className:"text-[#3a5166] leading-4",children:w||"Overlap demand"}),(0,r.jsx)("div",{className:"text-[#092540] font-bold text-right leading-4",children:abbr(a.demand_weekly)}),(0,r.jsx)("div",{className:"text-[#3a5166] leading-4",children:y||"Lead vs you"}),(0,r.jsx)("div",{className:"text-[#092540] font-bold text-right leading-4",children:Z(a.brand_share)}),void 0!==a.shared_retailers_count&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-[#3a5166] leading-4",children:"Shared Retailers"}),(0,r.jsx)("div",{className:"text-[#092540] font-bold text-right leading-4",children:a.shared_retailers_count})]})]})]})}}),(0,r.jsx)(h.b,{data:E,fill:"#60a5fa",shape:e=>{let{cx:t,cy:s}=e,a=e.payload,l=g[a.retailerName]||"#60a5fa",n=Math.sqrt(e.size/Math.PI);return(0,r.jsx)("circle",{cx:t,cy:s,r:n,fill:l,fillOpacity:.9,stroke:"#334155",strokeOpacity:.25})}})]})})]})}var TabContent_OpportunityMatrixTab=e=>{let{selectedLegendHosts:t,legendRetailers:s,maxRetailerSelections:l,onRetailerToggle:n,onClearAll:i,onSelectAll:o,formatSkus:d,isLegendItemDisabled:c,seriesColorByRetailer:x}=e,[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h(!0),fetch("/data/retailer_series.csv",{cache:"no-store"}).then(e=>e.text()).then(e=>{let t={};e.split(/\r?\n/).forEach(e=>{let s=(e||"").trim();if(!s||s.startsWith("#")||/^key\b/i.test(s))return;let r=s.split(",").map(e=>e.trim());if(r.length<22)return;let a=r[0],l=r.slice(1,8).map(e=>parseInt(e,10)).filter(e=>!Number.isNaN(e)),n=r.slice(8,15).map(e=>parseInt(e,10)).filter(e=>!Number.isNaN(e)),i=r.slice(15,22).map(e=>parseInt(e,10)).filter(e=>!Number.isNaN(e));a&&7===l.length&&7===n.length&&7===i.length&&(t[a]={current:l,prevPop:n,prevYoy:i})});let s=Object.entries(t).map(e=>{let[t,s]=e,avg=e=>e.reduce((e,t)=>e+t,0)/e.length||0,r=avg(s.current),a=avg(s.prevPop),l=avg(s.prevYoy),n=t.split("").reduce((e,t)=>e+t.charCodeAt(0),0),i=Math.max(0,Math.min(.28,.02+n%140/1e3)),o=(n%31-15)/1e3,d=(n%41-20)/1e3,c=r>0?Math.max(.001,Math.min(.6,i)):0,x=a>0?Math.max(.001,Math.min(.6,i+o)):i+o,u=l>0?Math.max(.001,Math.min(.6,i+d)):i+d,p=c>0?r/c:Math.max(1e3,n%8e3+2e3),m=x>0?a/x:0,h=u>0?l/u:0;return{retailerId:t,retailerName:t,demand_weekly:Math.max(0,Math.round(p)),brand_share:Math.max(0,Math.min(1,c)),brand_views_weekly:Math.max(0,Math.round(r)),demand_growth_pop:m>0?(p-m)/m:void 0,demand_growth_yoy:h>0?(p-h)/h:void 0,brand_share_delta_pop:void 0!==x?c-x:void 0,brand_share_delta_yoy:void 0!==u?c-u:void 0}});p(s)}).catch(()=>p([])).finally(()=>h(!1))},[]);let f=(0,a.useMemo)(()=>{if(!(null==t?void 0:t.length))return[];let e=new Set(t);return u.filter(t=>e.has(t.retailerName))},[u,t]),g=(0,a.useMemo)(()=>{if(!f.length)return null;let{scored:e,targetShare:t}=scoreRetailers(f),s=buildChannelOpportunityInsight(e,"pop",t);return{headline:s.title,sentence:s.text,chips:[]}},[f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-10 h-[400px] items-start justify-start p-4 w-full",children:[(0,r.jsx)("div",{className:"grow h-full min-h-px min-w-px relative",children:m?(0,r.jsx)("div",{className:"h-[420px] flex items-center justify-center rounded-lg bg-gray-50 text-gray-500",children:"Loading…"}):(0,r.jsx)(RetailerOpportunityMatrix,{data:f,mode:"pop",colorByRetailer:x,bubbleSizeRange:[300,3e3],xAxisLabel:"Category demand (total views)",yAxisLabel:"Brand presence (share)",xValueLabel:"Demand",yValueLabel:"Share",xAxisTooltip:"Total category views across all selected retailers. Shows the size of the market opportunity for each retailer.",yAxisTooltip:"Your brand's share of total views on each retailer. Higher share indicates stronger brand presence and performance."})}),(0,r.jsx)(components_ChartLegend,{legendRetailers:s,selectedLegendHosts:t,seriesColorByRetailer:x,maxRetailerSelections:l,onRetailerToggle:n,onClearAll:i,onSelectAll:o,formatSkus:d,isLegendItemDisabled:c})]}),g&&(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)(components_InsightSection,{dynamicInsight:g})})]})},f=s(2074);let CompetitorLandscapeInsight_percentile=(e,t)=>{if(!e.length)return 0;let s=e.slice().sort((e,t)=>e-t),r=(s.length-1)*t,a=Math.floor(r);return s[a]+(s[Math.min(a+1,s.length-1)]-s[a])*(r-a)},CompetitorLandscapeInsight_abbr=e=>e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":String(Math.round(e));function leadVsMe(e,t){let s=e+t;return s>0?(t-e)/s:0}let pp=e=>"".concat(Math.abs(100*e).toFixed(1)," pp");function pickCompetitorLandscapeInsight(e){if(!e.length)return{brand:"",title:"No data",text:"Not enough overlap to compare competitors."};let t=e.map(e=>{let t=Math.max(0,e.overlapCategoryViews),s=leadVsMe(e.myViewsOverlap,e.compViewsOverlap);return{brand:e.brand,x:t,y:s,yAbs:Math.abs(s),threat:t*Math.max(0,s)}}),s=t.filter(e=>e.x>=1e4),r=s.length?s:t,a=CompetitorLandscapeInsight_percentile(r.map(e=>e.x),.7),l=r.filter(e=>e.x>=a&&e.y>0),n=r.filter(e=>e.x>=a&&e.y<=0),i=r.filter(e=>e.x<a&&e.y>0),o=l.filter(e=>e.y>=.1).sort((e,t)=>t.threat-e.threat)[0];if(o){let e=pp(o.y),t=CompetitorLandscapeInsight_abbr(o.x);return{brand:o.brand,title:"Strong competition from ".concat(o.brand),text:"<strong>".concat(o.brand,"</strong> leads your brand by <strong>").concat(e,"</strong> across ~<strong>").concat(t,"</strong> total overlapping views — placing it in Strong rival (high overlap, competitor ahead).")}}let d=n.filter(e=>e.y<=-.1).sort((e,t)=>t.x-e.x)[0];if(d){let e=pp(d.y),t=CompetitorLandscapeInsight_abbr(d.x);return{brand:d.brand,title:"You lead key market vs ".concat(d.brand),text:"You lead by <strong>".concat(e,"</strong> across ~<strong>").concat(t,"</strong> total overlapping views — classified as Your stronghold (high overlap, you ahead).")}}let c=i.sort((e,t)=>t.x-e.x)[0];if(c){let e=pp(c.y),t=CompetitorLandscapeInsight_abbr(c.x);return{brand:c.brand,title:"".concat(c.brand," leads in small market"),text:"<strong>".concat(c.brand,"</strong> leads by <strong>").concat(e,"</strong>, but the shared market is small (~<strong>").concat(t,"</strong> total views), hence Niche rival (low overlap).")}}let x=r.slice().sort((e,t)=>t.x-e.x)[0],u=pp(x.y),p=CompetitorLandscapeInsight_abbr(x.x),m=x.x>=a?x.y>0?"Strong rival":"Your stronghold":x.y>0?"Niche rival":"Low overlap";return{brand:x.brand,title:"Neck and neck with ".concat(x.brand),text:"Near parity at <strong>".concat(u,"</strong> over ~<strong>").concat(p,"</strong> total overlapping views — positioned as <strong>").concat(m,"</strong>.")}}let g=["#195AFE","#22C55E","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#10B981","#EC4899","#14B8A6"];function hashString(e){let t=2166136261;for(let s=0;s<e.length;s++)t^=e.charCodeAt(s),t=Math.imul(t,16777619);return t>>>0}function seededRand(e){let t=e>>>0;return()=>(t=Math.imul(1664525,t)+1013904223>>>0)/4294967296}let formatSkus=e=>e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,""),"K"):"".concat(e);var TabContent_CompetitiveLandscapeTab=e=>{let{selectedBrandName:t}=e,[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,d]=(0,a.useState)([]),[c,x]=(0,a.useState)({});(0,a.useEffect)(()=>{let e=f.K.filter(e=>"All Brands"!==e),t=e.map(e=>{let t=hashString(e.toLowerCase());return{name:e,skus:600+t%5800}});t.sort((e,t)=>t.skus-e.skus),d(t);let s=t.slice(0,Math.min(4,t.length)).map(e=>e.name);i(s);let r={};t.forEach((e,t)=>{r[e.name]=g[t%g.length]}),x(r);let a=t.map(e=>{let{name:t,skus:s}=e,r=hashString(t),a=seededRand(r),l=2e6+Math.floor(13e6*a()),n=.1+.6*a(),i=.1+.6*a(),o=Math.round(l*n),d=Math.round(l*i),c=o+d,x=(a()-.5)*.3,u=(a()-.5)*.4,p=(a()-.5)*.02,m=(a()-.5)*.03,h=Math.floor(3+r%13);return{retailerId:t,retailerName:t,demand_weekly:l,brand_share:c>0?(o-d)/c:0,brand_views_weekly:o,demand_growth_pop:x,demand_growth_yoy:u,brand_share_delta_pop:p,brand_share_delta_yoy:m,shared_retailers_count:h,skus:s,your_overlap_views:d}});l(a)},[]);let u=(0,a.useMemo)(()=>{if(!n.length)return[];let e=new Set(n);return s.filter(t=>e.has(t.retailerName))},[s,n]),p=(0,a.useMemo)(()=>{if(!u.length)return null;let e=u.map(e=>{let t=Math.max(0,e.demand_weekly||0),s=Math.max(0,e.brand_views_weekly||0),r=Math.max(0,e.your_overlap_views||0);return{brand:e.retailerName,overlapCategoryViews:t,myViewsOverlap:r,compViewsOverlap:s}}),t=pickCompetitorLandscapeInsight(e);return{headline:t.title,sentence:t.text,chips:[]}},[u]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-row gap-10 h-[400px] items-start justify-start p-4 w-full",children:[(0,r.jsx)("div",{className:"grow h-full min-h-px min-w-px relative",children:(0,r.jsx)(RetailerOpportunityMatrix,{data:u,mode:"pop",colorByRetailer:c,quadrantTitles:{topLeft:"Niche rival",topRight:"Strong rival",bottomLeft:"Low overlap",bottomRight:"Your stronghold"},xAxisLabel:"Overlap demand (total views)",yAxisLabel:"Head-to-head lead vs you (pp)",xValueLabel:"Overlap demand",yValueLabel:"Lead against ".concat(t),yTickFormatter:e=>"".concat(Math.round(100*e),"pp"),xAxisTooltip:"The size of the battleground between you and a competitor. Sum of total category views in all selected retailers where both of you are present.",yAxisTooltip:"Shows who's winning in head-to-head competition. Calculated as competitor's share minus your share in retailers where you both sell. Positive values mean they lead, negative means you lead.",bubbleSizeRange:[300,3e3]})}),(0,r.jsx)(components_ChartLegend,{legendRetailers:o,selectedLegendHosts:n,seriesColorByRetailer:c,maxRetailerSelections:7,onRetailerToggle:e=>{i(t=>{let s=t.includes(e);return s?t.filter(t=>t!==e):t.length>=7?t:[...t,e]})},onClearAll:()=>i([]),onSelectAll:()=>i(o.slice(0,7).map(e=>e.name)),formatSkus:formatSkus,isLegendItemDisabled:e=>!n.includes(e)&&n.length>=7})]}),p&&(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)(components_InsightSection,{dynamicInsight:p})})]})},components_MainChart=e=>{let{activeTab:t,setActiveTab:s,selectedLegendHosts:n,selectedBrandName:i,yAxisScale:o,reversedSteps:d,formatSkus:c,getSeriesForRetailer:x,seriesColorByRetailer:u,hoveredDateIdx:p,setHoveredDateIdx:m,setChartHoverPos:h,legendRetailers:f,maxRetailerSelections:g,onRetailerToggle:b,onClearAll:v,onSelectAll:j,isLegendItemDisabled:y,dynamicInsight:w}=e,[N,C]=(0,a.useState)(null),k={"retailer-growth":"Track how each retailer's views are trending over time. Shows absolute view counts and growth patterns.","brand-performance":"See what percentage of your brand each retailer represents. Shows relative market share distribution.","opportunity-matrix":"Identify which retailers offer the best growth opportunities based on demand vs. your current presence.","competitive-landscape":"Analyze head-to-head competition with other brands across different retailers."};return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg mb-8",children:[(0,r.jsx)("div",{className:"flex flex-col items-start justify-start p-0 w-full",children:(0,r.jsx)("div",{className:"flex flex-row items-center justify-between p-0 w-full border-b border-[#e6e9ec]",children:(0,r.jsxs)("div",{className:"flex flex-row w-full items-start justify-start min-h-px min-w-px p-0",children:[(0,r.jsx)("div",{className:"flex flex-col gap-3 flex-1 items-center justify-center min-h-px min-w-px p-6 cursor-pointer transition-colors hover:bg-gray-50 ".concat("retailer-growth"===t?"border-b-[3px] border-[#195afe]":""," relative"),onClick:()=>s("retailer-growth"),children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center p-0",children:[(0,r.jsx)("div",{className:"text-[16px] leading-[22px] font-normal text-[#092540] whitespace-nowrap",style:{fontFamily:"DM Sans, sans-serif"},children:"Retailer Growth Over Time"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#6b7c8c] cursor-help hover:text-[#195afe]",onMouseEnter:()=>C("retailer-growth"),onMouseLeave:()=>C(null),onClick:e=>e.stopPropagation()}),"retailer-growth"===N&&(0,r.jsxs)("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-64 z-50 pointer-events-none",children:[k["retailer-growth"],(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-center self-stretch",children:(0,r.jsx)("div",{className:"h-[70px] w-px bg-[#cbd1d7]"})}),(0,r.jsx)("div",{className:"flex flex-col gap-3 flex-1 items-center justify-center min-h-px min-w-px p-6 cursor-pointer transition-colors hover:bg-gray-50 ".concat("brand-performance"===t?"border-b-[3px] border-[#195afe]":""," relative"),onClick:()=>s("brand-performance"),children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center p-0",children:[(0,r.jsx)("div",{className:"text-[16px] leading-[22px] font-normal text-[#092540] whitespace-nowrap",style:{fontFamily:"DM Sans, sans-serif"},children:"Retailers' Share of the Brand"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#6b7c8c] cursor-help hover:text-[#195afe]",onMouseEnter:()=>C("brand-performance"),onMouseLeave:()=>C(null),onClick:e=>e.stopPropagation()}),"brand-performance"===N&&(0,r.jsxs)("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-64 z-50 pointer-events-none",children:[k["brand-performance"],(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-center self-stretch",children:(0,r.jsx)("div",{className:"h-[70px] w-px bg-[#cbd1d7]"})}),(0,r.jsx)("div",{className:"flex flex-col gap-3 flex-1 items-center justify-center min-h-px min-w-px p-6 cursor-pointer transition-colors hover:bg-gray-50 ".concat("opportunity-matrix"===t?"border-b-[3px] border-[#195afe]":""," relative"),onClick:()=>s("opportunity-matrix"),children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center p-0",children:[(0,r.jsx)("div",{className:"text-[16px] leading-[22px] font-normal text-[#092540] whitespace-nowrap",style:{fontFamily:"DM Sans, sans-serif"},children:"Retailer Opportunity Matrix"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#6b7c8c] cursor-help hover:text-[#195afe]",onMouseEnter:()=>C("opportunity-matrix"),onMouseLeave:()=>C(null),onClick:e=>e.stopPropagation()}),"opportunity-matrix"===N&&(0,r.jsxs)("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-64 z-50 pointer-events-none",children:[k["opportunity-matrix"],(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-center self-stretch",children:(0,r.jsx)("div",{className:"h-[70px] w-px bg-[#cbd1d7]"})}),(0,r.jsx)("div",{className:"flex flex-col gap-3 flex-1 items-center justify-center min-h-px min-w-px p-6 cursor-pointer transition-colors hover:bg-gray-50 ".concat("competitive-landscape"===t?"border-b-[3px] border-[#195afe]":""," relative"),onClick:()=>s("competitive-landscape"),children:(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center p-0",children:[(0,r.jsx)("div",{className:"text-[16px] leading-[22px] font-normal text-[#092540] whitespace-nowrap",style:{fontFamily:"DM Sans, sans-serif"},children:"Brand Competitive landscape"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#6b7c8c] cursor-help hover:text-[#195afe]",onMouseEnter:()=>C("competitive-landscape"),onMouseLeave:()=>C(null),onClick:e=>e.stopPropagation()}),"competitive-landscape"===N&&(0,r.jsxs)("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-64 z-50 pointer-events-none",children:[k["competitive-landscape"],(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]})]})})]})})}),"brand-performance"===t&&(0,r.jsx)(TabContent_BrandShareTab,{selectedLegendHosts:n,legendRetailers:f,maxRetailerSelections:g,onRetailerToggle:b,onClearAll:v,onSelectAll:j,formatSkus:c,isLegendItemDisabled:y,seriesColorByRetailer:u,getSeriesForRetailer:x,hoveredDateIdx:p,setHoveredDateIdx:m,setChartHoverPos:h,dynamicInsight:w}),"retailer-growth"===t&&(0,r.jsx)(TabContent_RetailerGrowthTab,{selectedLegendHosts:n,yAxisScale:o,reversedSteps:d,formatSkus:c,getSeriesForRetailer:x,seriesColorByRetailer:u,hoveredDateIdx:p,setHoveredDateIdx:m,setChartHoverPos:h,legendRetailers:f,maxRetailerSelections:g,onRetailerToggle:b,onClearAll:v,onSelectAll:j,isLegendItemDisabled:y,dynamicInsight:w}),"opportunity-matrix"===t&&(0,r.jsx)(TabContent_OpportunityMatrixTab,{selectedLegendHosts:n,legendRetailers:f,maxRetailerSelections:g,onRetailerToggle:b,onClearAll:v,onSelectAll:j,formatSkus:c,isLegendItemDisabled:y,seriesColorByRetailer:u}),"competitive-landscape"===t&&(0,r.jsx)(TabContent_CompetitiveLandscapeTab,{selectedBrandName:i})]})}},1230:function(e,t,s){var r=s(5893),a=s(7294),l=s(2313);t.Z=e=>{let{brandSel:t,currentBrandData:s,brandData:n,onBrandHover:i,onBrandLeave:o,getOrdinal:d,getBrandHeadline:c}=e,[x,u]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg mb-8",children:[(0,r.jsx)("div",{className:"px-6 pt-4 pb-4 border-b border-[#E6E9EC]",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("h3",{className:"text-[20px] leading-6 font-medium text-[#092540]",style:{fontFamily:"DM Sans, sans-serif",fontWeight:"500",lineHeight:"24px"},children:[t,"'s Market Position by views"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6] cursor-help hover:text-[#195afe]",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),x&&(0,r.jsxs)("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-3 py-2 w-64 z-50 pointer-events-none",children:["Shows your brand's competitive position relative to other brands in the category. Higher percentile indicates stronger market performance.",(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,r.jsx)("img",{src:"/assets/f743f0cc589b750074a9fe613e2a212fb32ce333.svg",alt:"",className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-[13px] leading-4 text-[#B6BEC6]",style:{fontFamily:"Roboto, sans-serif"},children:"Jul 2020 - May 2023"})]})]})})}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-start gap-4 h-12 mb-4",children:[(0,r.jsx)("div",{className:"flex flex-col justify-center h-6 w-10 text-[12px] text-[#092540] font-normal",style:{fontFamily:"Roboto, sans-serif"},children:"Trailing"}),(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 items-center justify-start mt-2.5 w-full",children:[(0,r.jsx)("div",{className:"h-[5px] bg-gradient-to-r from-[#e6e9ec] to-[#82affe] w-full"}),(0,r.jsxs)("div",{className:"flex justify-center items-start gap-[107px] text-[12px] text-[#3A5166] font-normal w-full",style:{fontFamily:"Roboto, sans-serif"},children:[(0,r.jsx)("span",{className:"text-right flex-1",children:"Behind"}),(0,r.jsx)("span",{className:"text-center flex-1",children:"Median"}),(0,r.jsx)("span",{className:"text-left flex-1",children:"Ahead"})]})]}),(0,r.jsxs)("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-start",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-300 transition-colors",onMouseEnter:e=>i("Co",e),onMouseLeave:o,children:(0,r.jsx)("span",{className:"text-[12px] font-bold text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"Co"})}),(0,r.jsx)("div",{className:"w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-300 transition-colors",onMouseEnter:e=>i("Pu",e),onMouseLeave:o,children:(0,r.jsx)("span",{className:"text-[12px] font-bold text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"Pu"})}),(0,r.jsx)("div",{className:"w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-300 transition-colors",onMouseEnter:e=>i("DM",e),onMouseLeave:o,children:(0,r.jsx)("span",{className:"text-[12px] font-bold text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"DM"})}),(0,r.jsx)("div",{className:"w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-300 transition-colors",onMouseEnter:e=>i("Ad",e),onMouseLeave:o,children:(0,r.jsx)("span",{className:"text-[12px] font-bold text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"Ad"})}),(0,r.jsx)("div",{className:"w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-300 transition-colors",onMouseEnter:e=>i("NB",e),onMouseLeave:o,children:(0,r.jsx)("span",{className:"text-[12px] font-bold text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"NB"})}),(0,r.jsx)("div",{className:"absolute w-6 h-6 bg-white border border-[#e6e9ec] rounded flex items-center justify-center p-2 cursor-pointer hover:border-blue-400 transition-all duration-300",style:{width:"26px",height:"26px",left:s.position,transform:"translateX(-50%)",top:"0"},onMouseEnter:e=>i(t,e),onMouseLeave:o,children:(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{width:"8px",height:"8px"}})})]})]}),(0,r.jsx)("div",{className:"flex flex-col justify-center h-6 w-[77px] text-[12px] text-[#092540] font-normal text-right whitespace-nowrap",style:{fontFamily:"Roboto, sans-serif"},children:"Market Leader"})]}),(0,r.jsxs)("div",{className:"bg-[#f5f8ff] rounded-lg p-4 w-full",children:[(0,r.jsx)("div",{className:"flex flex-col items-start justify-start w-full",children:(0,r.jsx)("h4",{className:"text-[20px] leading-7 font-bold text-[#092540] text-center w-full",style:{fontFamily:"DM Sans, sans-serif"},children:c(s.status,t)})}),(0,r.jsx)("div",{className:"h-px w-full my-2",children:(0,r.jsx)("img",{src:"/assets/dc289e6a6ffaf06d2e064fa9fe8267366e41a94d.svg",alt:"",className:"w-full h-px"})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("p",{className:"text-[14px] leading-5 text-[#092540] text-center flex items-center justify-center gap-2 flex-wrap",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsxs)("span",{children:["You're in the ",(0,r.jsx)("span",{className:"font-bold",children:d(s.percentile)})," percentile (rank ",s.rank," of ",s.total,")."]}),(0,r.jsx)("span",{className:"bg-[#e6faf5] text-[#009688] text-[9px] font-bold px-1.5 py-0.5 rounded-full tracking-wide",children:"+3PP PoP"}),(0,r.jsx)("span",{className:"bg-[#ffe6e6] text-[#bb3f3f] text-[9px] font-bold px-1.5 py-0.5 rounded-full tracking-wide",children:"-2PP YoY"})]})})]})]})]})}},9876:function(e,t,s){var r=s(5893);s(7294),t.Z=e=>{let{hoveredBrand:t,brandData:s,tooltipPosition:a}=e;return t&&s[t]?(0,r.jsxs)("div",{className:"fixed z-[60] bg-white border border-gray-200 rounded-lg shadow-lg p-3 pointer-events-none",style:{left:a.x+10,top:a.y-10,transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900 mb-1",children:s[t].name}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Percentile:"})," ",s[t].percentile,"th"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Rank:"})," ",s[t].rank," of ",s[t].total]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Status:"})," ",s[t].status]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Views:"})," ",s[t].views]})]})]}):null}},2991:function(e,t,s){var r=s(5893);s(7294),t.Z=e=>{let{hoveredDateIdx:t,selectedLegendHosts:s,chartHoverPos:a,dateLabels:l,getSeriesForRetailer:n,seriesColorByRetailer:i,formatSkus:o,mode:d="views",allHeaderHosts:c}=e;if(null===t||0===s.length)return null;let{selectedTotal:x,headerTotal:u}=(()=>{let e=c&&c.length>0?c:s,r=0,a=0;return s.forEach(e=>{let s=n(e)||[];r+=s[t]||0}),e.forEach(e=>{let s=n(e)||[];a+=s[t]||0}),{selectedTotal:r,headerTotal:a}})();return(0,r.jsxs)("div",{className:"fixed z-[60] bg-white border border-gray-200 rounded-xl shadow-xl p-4 min-w-[260px] pointer-events-none",style:{left:a.x+12,top:a.y-12},children:[(0,r.jsx)("div",{className:"text-[14px] font-bold text-[#092540] mb-1",style:{fontFamily:"DM Sans, sans-serif"},children:l[t]}),"views"===d?(0,r.jsxs)("div",{className:"text-[12px] text-[#6b7c8c] mb-3",style:{fontFamily:"DM Sans, sans-serif"},children:["Total daily views – ",o(x)]}):(0,r.jsxs)("div",{className:"text-[12px] text-[#6b7c8c] mb-3",style:{fontFamily:"DM Sans, sans-serif"},children:["Selected share – ",u>0?(x/u*100).toFixed(0):"0","%"]}),(0,r.jsx)("div",{className:"space-y-2",children:s.map(e=>{let s=i[e]||"#CBD1D7",a=n(e),l=a[t]||0;return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:s}}),(0,r.jsx)("span",{className:"text-[13px] text-[#092540]",style:{fontFamily:"Roboto, sans-serif"},children:e})]}),(0,r.jsx)("div",{className:"text-[13px] font-semibold text-[#092540]",style:{fontFamily:"Roboto, sans-serif"},children:"views"===d?o(l):u>0?"".concat((l/u*100).toFixed(0),"%"):"0%"})]},e)})})]})}},8908:function(e,t,s){s.d(t,{Z:function(){return TopSkusTile}});var r=s(5893),a=s(7294),l=s(2313),n=s(1902);function abbr(e){let t=Math.abs(e);return t>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":t>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function seededRand(e){let t=e;return()=>(t=Math.imul(1664525,t)+1013904223>>>0)/4294967296}function titleCase(e){return e.split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function synthesizeSkusFromRetailers(e,t,s){let r=["Adidas","Apple","Nike","Samsung","Sony","Microsoft","Canon","Garmin","Ray-Ban","Bose","Dell","HP","Logitech","Intel"],a=s&&!r.includes(s)?[s,...r]:r,l=["Accessories","Kitchen","Eyewear","Electronics","Stationery","Beauty"],n=[],i=Math.ceil(t/e.length);return e.forEach(e=>{let t=(e.retailerName||"").split("").reduce((e,t)=>e+t.charCodeAt(0),0),r=seededRand(t),o=e.retailerName;for(let d=0;d<i;d++){let i=s&&d%4==0?s:a[Math.floor(r()*a.length)],c=l[Math.floor(r()*l.length)],x=Math.round((8+220*r())*100)/100,u=Math.max(1e3,e.demand_weekly||0)*(.02+.12*r()),p=Math.round(u),m="SKU"+Math.abs(Math.imul(t,d+37)).toString(36).slice(0,8).toUpperCase(),h="".concat(i," ").concat(titleCase(c)," ").concat(Math.floor(10+90*r()));n.push({sku:m,name:h,brand:i,retailer:o,category:c,price:x,views:p})}}),n.sort((e,t)=>t.views-e.views).slice(0,t)}function placeholdersFor(e){switch(e){case"Product Name":return{include:"e.g., Utility Knife, Kitchen",exclude:"e.g., Knife set"};case"Brand":return{include:"e.g., Nike, Adidas",exclude:"e.g., Puma"};case"Retailer":return{include:"e.g., amazon.com, walmart.com",exclude:"e.g., bestbuy.com"};case"Price Range":return{include:"e.g., 20",exclude:"e.g., 200"};case"Views":return{include:"e.g., 1000",exclude:"e.g., 50000"};default:return{include:"Include…",exclude:"Exclude…"}}}function labelsFor(e){switch(e){case"Price Range":case"Views":return{include:"Min",exclude:"Max"};default:return{include:"Include",exclude:"Exclude"}}}function NoAggregationTab(e){let{retailers:t,selectedBrandName:s}=e,[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)({include:"",exclude:""}),[x,u]=(0,a.useState)({}),[p,m]=(0,a.useState)("views"),[h,f]=(0,a.useState)("desc"),[g,b]=(0,a.useState)(1),[v]=(0,a.useState)(10),j=(0,a.useRef)(null),y=(0,a.useRef)(null),w=(0,a.useMemo)(()=>synthesizeSkusFromRetailers(t,350,s),[t,s]),N=(0,a.useMemo)(()=>w.filter(e=>{var t,s,r,a,l,n;let i=x["Product Name"];if((null==i?void 0:i.include)||(null==i?void 0:i.exclude)){let r=(null===(t=i.include)||void 0===t?void 0:t.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],a=(null===(s=i.exclude)||void 0===s?void 0:s.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.name.toLowerCase();if(r.length>0&&!r.some(e=>l.includes(e))||a.length>0&&a.some(e=>l.includes(e)))return!1}let o=x.Brand;if((null==o?void 0:o.include)||(null==o?void 0:o.exclude)){let t=(null===(r=o.include)||void 0===r?void 0:r.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(a=o.exclude)||void 0===a?void 0:a.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.brand.toLowerCase();if(t.length>0&&!t.some(e=>l.includes(e))||s.length>0&&s.some(e=>l.includes(e)))return!1}let d=x.Retailer;if((null==d?void 0:d.include)||(null==d?void 0:d.exclude)){let t=(null===(l=d.include)||void 0===l?void 0:l.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(n=d.exclude)||void 0===n?void 0:n.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],r=e.retailer.toLowerCase();if(t.length>0&&!t.some(e=>r.includes(e))||s.length>0&&s.some(e=>r.includes(e)))return!1}let c=x["Price Range"];if((null==c?void 0:c.include)||(null==c?void 0:c.exclude)){let t=c.include?parseFloat(c.include):null,s=c.exclude?parseFloat(c.exclude):null;if(null!==t&&!isNaN(t)&&e.price<t||null!==s&&!isNaN(s)&&e.price>s)return!1}let u=x.Views;if((null==u?void 0:u.include)||(null==u?void 0:u.exclude)){let t=u.include?parseFloat(u.include):null,s=u.exclude?parseFloat(u.exclude):null;if(null!==t&&!isNaN(t)&&e.views<t||null!==s&&!isNaN(s)&&e.views>s)return!1}return!0}),[w,x]),C=(0,a.useMemo)(()=>[...N].sort((e,t)=>{let s,r;switch(p){case"name":s=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"brand":s=e.brand.toLowerCase(),r=t.brand.toLowerCase();break;case"retailer":s=e.retailer.toLowerCase(),r=t.retailer.toLowerCase();break;case"category":s=e.category.toLowerCase(),r=t.category.toLowerCase();break;case"price":s=e.price,r=t.price;break;case"views":s=e.views,r=t.views;break;default:return 0}return"string"==typeof s&&"string"==typeof r?"asc"===h?s.localeCompare(r):r.localeCompare(s):"asc"===h?s-r:r-s}),[N,p,h]),k=Math.ceil(C.length/v),M=(g-1)*v,B=M+v,E=C.slice(M,B),S=s||"My Brand",_=N.reduce((e,t)=>e+t.views,0),F=N.length?N.reduce((e,t)=>e+t.price,0)/N.length:0,L=N.filter(e=>e.brand===S).length,R=N.length?L/N.length*100:0;(0,a.useEffect)(()=>{function onDocMouseDown(e){j.current&&!j.current.contains(e.target)&&o(null)}function onEsc(e){"Escape"===e.key&&o(null)}return document.addEventListener("mousedown",onDocMouseDown),document.addEventListener("keydown",onEsc),()=>{document.removeEventListener("mousedown",onDocMouseDown),document.removeEventListener("keydown",onEsc)}},[]),(0,a.useEffect)(()=>{i&&y.current&&y.current.focus()},[i]);let handleSort=e=>{p===e?f(e=>"asc"===e?"desc":"asc"):(m(e),f("views"===e||"price"===e?"desc":"asc")),b(1)};(0,a.useEffect)(()=>{b(1)},[x]);let getSortIcon=e=>p!==e?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#9EA8B2]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===h?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4l9 16 9-16H3z"})}):(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 20L12 4 3 20h18z"})});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"relative p-4 gap-2.5 flex border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Total Views"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:abbr(_)}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Sum of all product views across filtered SKUs"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Average Price Point"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsxs)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:["$",F.toFixed(0)]}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Average price across all filtered SKUs"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"My SKUs"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:L}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:["Number of SKUs from ",S," in filtered results"]})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"My Share of Shelf"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsxs)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:[Math.round(R),"%"]}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:["Percentage of total SKUs that belong to ",S]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center gap-2 border-b border-[#E6E9EC]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#3A5166]",style:{fontFamily:"DM Sans, sans-serif"},children:"Filter By:"}),(0,r.jsx)("div",{className:"flex items-center gap-2 h-8",children:["Product Name","Brand","Retailer","Price Range","Views"].map(e=>{var t,s,a,l,n,p;let m=i===e,h=!!((null===(t=x[e])||void 0===t?void 0:t.include)||(null===(s=x[e])||void 0===s?void 0:s.exclude)),f=((null===(l=x[e])||void 0===l?void 0:null===(a=l.include)||void 0===a?void 0:a.split(",").filter(Boolean).length)||0)+((null===(p=x[e])||void 0===p?void 0:null===(n=p.exclude)||void 0===n?void 0:n.split(",").filter(Boolean).length)||0);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"rounded-[40px] pl-3 pr-1 py-1 flex items-center gap-2 text-[12px] leading-[16px] ".concat(m||h?"bg-[#3A5166] text-white":"bg-[#F7F7F8] hover:bg-[#E6E9EC] text-[#092540]"),style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{let t=m?null:e;o(t),c(x[e]||{include:"",exclude:""})},className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e}),h&&(0,r.jsx)("span",{className:"text-[11px] px-1.5 py-0.5 rounded-full ".concat(m?"bg-white/20 text-white":"bg-[#E6E9EC] text-[#092540]"),children:f})]}),(0,r.jsx)("button",{type:"button",onClick:t=>{if(t.stopPropagation(),h)u(t=>({...t,[e]:{include:"",exclude:""}})),o(null);else{let t=m?null:e;o(t),c(x[e]||{include:"",exclude:""})}},className:"w-6 h-6 relative flex items-center justify-center",children:m||h?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-[12px] h-[12px]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.2"}),(0,r.jsx)("path",{d:"M15.5 8.5L8.5 15.5M15.5 15.5L8.5 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}):(0,r.jsx)("svg",{viewBox:"0 0 20 20",className:"w-[10px] h-[6px] text-[#092540]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M5 7l5 5 5-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),m&&(0,r.jsxs)("div",{ref:j,className:"absolute left-0 top-10 z-30 bg-white rounded p-3 w-[280px] shadow-[0px_1px_8px_rgba(9,37,64,0.08),0px_5px_24px_rgba(9,37,64,0.08)] border border-[#D1D6DD]",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsx)("div",{className:"absolute -top-2 left-6 w-0 h-0 border-l-8 border-r-8 border-b-8 border-l-transparent border-r-transparent border-b-[#D1D6DD]"}),(0,r.jsx)("div",{className:"absolute -top-[7px] left-6 w-0 h-0 border-l-7 border-r-7 border-b-7 border-l-transparent border-r-transparent border-b-white"}),(0,r.jsxs)("div",{className:"relative flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:labelsFor(e).include}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{ref:y,className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:placeholdersFor(e).include,value:d.include,onChange:e=>c(t=>({...t,include:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between gap-2 mb-2 w-[257px]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:labelsFor(e).exclude}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:placeholdersFor(e).exclude,value:d.exclude,onChange:e=>c(t=>({...t,exclude:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,r.jsx)("div",{className:"text-[12px] leading-[16px] text-[#B6BEC6]",children:"Price Range"===e||"Views"===e?"Enter numeric values":"Separate terms by comma"}),h&&(0,r.jsx)("button",{className:"text-[12px] text-[#6B7C8C] hover:text-[#195AFE]",onClick:()=>{u(t=>({...t,[e]:{include:"",exclude:""}})),o(null)},children:"Clear"}),(0,r.jsx)("button",{className:"text-[14px] leading-[20px] rounded-[18px] px-4 py-2 ".concat(d.include.trim()||d.exclude.trim()?"bg-[#195AFE] text-white":"bg-[#E6E9EC] text-[#6B7C8C] cursor-not-allowed"),disabled:!(d.include.trim()||d.exclude.trim()),onClick:()=>{(d.include.trim()||d.exclude.trim())&&(u(t=>({...t,[e]:d})),o(null))},children:"Done"})]})]})]},e)})})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.7fr_0.7fr_0.7fr_0.5fr_0.5fr] text-[12px] text-[#3a5166] border-b border-[#E6E9EC] h-12 items-center",style:{fontFamily:"Roboto, sans-serif"},children:[(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start border-r border-[#E6E9EC] px-4 h-full",onClick:()=>handleSort("name"),children:["SKU Name ",getSortIcon("name")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("brand"),children:["Brand ",getSortIcon("brand")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("retailer"),children:["Retailer ",getSortIcon("retailer")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("category"),children:["Category ",getSortIcon("category")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("price"),children:["Price ",getSortIcon("price")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("views"),children:["Views ",getSortIcon("views")]})]}),E.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.7fr_0.7fr_0.7fr_0.5fr_0.5fr] text-[14px] text-[#092540] h-20 items-center border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0 border-r border-[#E6E9EC] px-4 h-full",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white rounded-md border border-[#E6E9EC] overflow-hidden",children:(0,r.jsx)("img",{src:"https://picsum.photos/seed/".concat(e.sku,"/48/48"),alt:e.name,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,r.jsx)("div",{className:"truncate",title:e.name,children:e.name}),(0,r.jsxs)("div",{className:"text-[12px] text-[#09254099] flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.sku}),(0,r.jsx)(n.Z,{className:"w-4 h-4 text-[#6b7c8c]"})]})]})]}),(0,r.jsx)("div",{className:"truncate px-4 h-full flex items-center",title:e.brand,children:e.brand}),(0,r.jsx)("div",{className:"truncate px-4 h-full flex items-center",title:e.retailer,children:e.retailer}),(0,r.jsx)("div",{className:"truncate px-4 h-full flex items-center",title:e.category,children:e.category}),(0,r.jsxs)("div",{className:"px-4 h-full flex items-center",children:["$",e.price.toFixed(2)]}),(0,r.jsx)("div",{className:"px-4 h-full flex items-center",children:abbr(e.views)})]},e.sku))]}),k>1&&(0,r.jsx)("div",{className:"bg-white flex flex-col h-[73px] items-end justify-center relative rounded-bl-md rounded-br-md border-t border-[#CBD1D7]",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-end px-6 py-3 w-full",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>b(1),disabled:1===g,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M11 7l-5 5 5 5M19 7l-5 5 5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===g,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,r.jsxs)("div",{className:"flex gap-1 items-center justify-start",children:[(0,r.jsx)("div",{className:"border border-[#E6E9EC] px-1.5 py-0.5",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:g})}),(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:"out of"}),(0,r.jsx)("div",{className:"px-1 py-0",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:k})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>b(e=>Math.min(k,e+1)),disabled:g===k,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>b(k),disabled:g===k,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M13 17l5-5-5-5M5 17l5-5-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})]})}function AggregateByBrandsTab_abbr(e){let t=Math.abs(e);return t>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":t>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function AggregateByBrandsTab_seededRand(e){let t=e>>>0;return()=>(t=Math.imul(1664525,t)+1013904223>>>0)/4294967296}function AggregateByBrandsTab_titleCase(e){return e.split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function AggregateByBrandsTab_synthesizeSkusFromRetailers(e,t,s){let r=["Adidas","Apple","Nike","Samsung","Sony","Microsoft","Canon","Garmin","Ray-Ban","Bose","Dell","HP","Logitech","Intel"],a=s&&!r.includes(s)?[s,...r]:r,l=["Accessories","Kitchen","Eyewear","Electronics","Stationery","Beauty"],n=[],i=Math.max(1,Math.ceil(t/Math.max(1,e.length)));return e.forEach(e=>{let t=(e.retailerName||"").split("").reduce((e,t)=>e+t.charCodeAt(0),0),r=AggregateByBrandsTab_seededRand(t),o=e.retailerName;for(let d=0;d<i;d++){let i=s&&d%4==0?s:a[Math.floor(r()*a.length)],c=l[Math.floor(r()*l.length)],x=Math.round((8+220*r())*100)/100,u=Math.max(1e3,e.demand_weekly||0)*(.02+.12*r()),p=Math.round(u),m="SKU"+Math.abs(Math.imul(t,d+37)).toString(36).slice(0,8).toUpperCase(),h="".concat(i," ").concat(AggregateByBrandsTab_titleCase(c)," ").concat(Math.floor(10+90*r()));n.push({sku:m,name:h,brand:i,retailer:o,category:c,price:x,views:p})}}),n.sort((e,t)=>t.views-e.views).slice(0,t)}function AggregateByBrandsTab_placeholdersFor(e){switch(e){case"Product Name":return{include:"e.g., Utility Knife, Kitchen",exclude:"e.g., Knife set"};case"Brand":return{include:"e.g., Nike, Adidas",exclude:"e.g., Puma"};case"Retailer":return{include:"e.g., amazon.com, walmart.com",exclude:"e.g., bestbuy.com"};case"Price Range":return{include:"e.g., 20",exclude:"e.g., 200"};case"Views":return{include:"e.g., 1000",exclude:"e.g., 50000"};default:return{include:"Include…",exclude:"Exclude…"}}}function AggregateByBrandsTab_labelsFor(e){switch(e){case"Price Range":case"Views":return{include:"Min",exclude:"Max"};default:return{include:"Include",exclude:"Exclude"}}}function parseNumericInput(e){if(!e)return null;let t=e.trim().toLowerCase();if(!t)return null;let s=1;t.endsWith("k")?s=1e3:t.endsWith("m")?s=1e6:t.endsWith("b")&&(s=1e9);let r=parseFloat(t.replace(/[kmb]$/,""));return isNaN(r)?null:r*s}function AggregateByBrandsTab(e){let{retailers:t,selectedBrandName:s,selectedBrandsHeader:n}=e,[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)({include:"",exclude:""}),[x,u]=(0,a.useState)({}),[p,m]=(0,a.useState)("views"),[h,f]=(0,a.useState)("desc"),[g,b]=(0,a.useState)(1),[v]=(0,a.useState)(10),j=(0,a.useRef)(null),y=(0,a.useRef)(null),w=(0,a.useMemo)(()=>AggregateByBrandsTab_synthesizeSkusFromRetailers(t,350,s),[t,s]),N=(0,a.useMemo)(()=>w.filter(e=>{var t,s,r,a,l,n;let i=x["Product Name"];if((null==i?void 0:i.include)||(null==i?void 0:i.exclude)){let r=(null===(t=i.include)||void 0===t?void 0:t.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],a=(null===(s=i.exclude)||void 0===s?void 0:s.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.name.toLowerCase();if(r.length>0&&!r.some(e=>l.includes(e))||a.length>0&&a.some(e=>l.includes(e)))return!1}let o=x.Brand;if((null==o?void 0:o.include)||(null==o?void 0:o.exclude)){let t=(null===(r=o.include)||void 0===r?void 0:r.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(a=o.exclude)||void 0===a?void 0:a.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.brand.toLowerCase();if(t.length>0&&!t.some(e=>l.includes(e))||s.length>0&&s.some(e=>l.includes(e)))return!1}let d=x.Retailer;if((null==d?void 0:d.include)||(null==d?void 0:d.exclude)){let t=(null===(l=d.include)||void 0===l?void 0:l.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(n=d.exclude)||void 0===n?void 0:n.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],r=e.retailer.toLowerCase();if(t.length>0&&!t.some(e=>r.includes(e))||s.length>0&&s.some(e=>r.includes(e)))return!1}let c=x["Price Range"];if((null==c?void 0:c.include)||(null==c?void 0:c.exclude)){let t=parseNumericInput(c.include),s=parseNumericInput(c.exclude);if(null!==t&&!isNaN(t)&&e.price<t||null!==s&&!isNaN(s)&&e.price>s)return!1}let u=x.Views;if((null==u?void 0:u.include)||(null==u?void 0:u.exclude)){let t=parseNumericInput(u.include),s=parseNumericInput(u.exclude);if(null!==t&&!isNaN(t)&&e.views<t||null!==s&&!isNaN(s)&&e.views>s)return!1}return!0}),[w,x]),C=(0,a.useMemo)(()=>{let e=new Set(w.map(e=>e.brand));if(n&&n.length>0&&!n.includes("All Brands"))for(let t of n)e.add(t);return Array.from(e)},[w,n]),k=(0,a.useMemo)(()=>{let e={};for(let t of N){e[t.brand]||(e[t.brand]={retailerSet:new Set,priceSum:0,views:0,skuCount:0});let s=e[t.brand];s.retailerSet.add(t.retailer),s.priceSum+=t.price,s.views+=t.views,s.skuCount+=1}return C.map(t=>{let s=e[t];return s?{brand:t,skuCount:s.skuCount,retailerCount:s.retailerSet.size,avgPrice:s.skuCount?s.priceSum/s.skuCount:0,views:s.views}:{brand:t,skuCount:0,retailerCount:0,avgPrice:0,views:0}})},[N,C]),M=(0,a.useMemo)(()=>[...k].sort((e,t)=>{let s,r;switch(p){case"brand":s=e.brand.toLowerCase(),r=t.brand.toLowerCase();break;case"retailerCount":s=e.retailerCount,r=t.retailerCount;break;case"avgPrice":s=e.avgPrice,r=t.avgPrice;break;default:s=e.views,r=t.views}return"string"==typeof s&&"string"==typeof r?"asc"===h?s.localeCompare(r):r.localeCompare(s):"asc"===h?s-r:r-s}),[k,p,h]),B=Math.max(1,Math.ceil(M.length/v)),E=(g-1)*v,S=E+v,_=M.slice(E,S),F=k.length,L=(0,a.useMemo)(()=>{let e=null;for(let t of k)(!e||t.views>e.views)&&(e=t);return(null==e?void 0:e.brand)||"-"},[k]),R=(0,a.useMemo)(()=>{let e=null;for(let t of k)(!e||t.skuCount>e.skuCount)&&(e=t);return(null==e?void 0:e.brand)||"-"},[k]),A=k.length?k.reduce((e,t)=>e+t.views,0)/k.length:0;(0,a.useEffect)(()=>{function onDocMouseDown(e){j.current&&!j.current.contains(e.target)&&o(null)}function onEsc(e){"Escape"===e.key&&o(null)}return document.addEventListener("mousedown",onDocMouseDown),document.addEventListener("keydown",onEsc),()=>{document.removeEventListener("mousedown",onDocMouseDown),document.removeEventListener("keydown",onEsc)}},[]),(0,a.useEffect)(()=>{i&&y.current&&y.current.focus()},[i]),(0,a.useEffect)(()=>{b(1)},[x]);let handleSort=e=>{p===e?f(e=>"asc"===e?"desc":"asc"):(m(e),f("brand"===e?"asc":"desc")),b(1)},getSortIcon=e=>p!==e?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#9EA8B2]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===h?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4l9 16 9-16H3z"})}):(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 20L12 4 3 20h18z"})});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"relative p-4 gap-2.5 flex border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Number of Brands"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:F}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Count of brands in filtered results"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Leader Brand by Views"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:L}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Brand with the highest total views in filtered results"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Leader Brand by SKUs"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:R}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Brand with the highest number of SKUs"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Average Brand Views"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:AggregateByBrandsTab_abbr(Math.round(A))}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Average views per brand in filtered results"})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center gap-2 border-b border-[#E6E9EC]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#3A5166]",style:{fontFamily:"DM Sans, sans-serif"},children:"Filter SKUs By:"}),(0,r.jsx)("div",{className:"flex items-center gap-2 h-8",children:["Product Name","Brand","Retailer","Price Range","Views"].map(e=>{var t,s,a,l,n,p;let m=i===e,h=!!((null===(t=x[e])||void 0===t?void 0:t.include)||(null===(s=x[e])||void 0===s?void 0:s.exclude)),f=((null===(l=x[e])||void 0===l?void 0:null===(a=l.include)||void 0===a?void 0:a.split(",").filter(Boolean).length)||0)+((null===(p=x[e])||void 0===p?void 0:null===(n=p.exclude)||void 0===n?void 0:n.split(",").filter(Boolean).length)||0);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"rounded-[40px] pl-3 pr-1 py-1 flex items-center gap-2 text-[12px] leading-[16px] ".concat(m||h?"bg-[#3A5166] text-white":"bg-[#F7F7F8] hover:bg-[#E6E9EC] text-[#092540]"),style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{let t=m?null:e;o(t),c(x[e]||{include:"",exclude:""})},className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e}),h&&(0,r.jsx)("span",{className:"text-[11px] px-1.5 py-0.5 rounded-full ".concat(m?"bg-white/20 text-white":"bg-[#E6E9EC] text-[#092540]"),children:f})]}),(0,r.jsx)("button",{type:"button",onClick:t=>{if(t.stopPropagation(),h)u(t=>({...t,[e]:{include:"",exclude:""}})),o(null);else{let t=m?null:e;o(t),c(x[e]||{include:"",exclude:""})}},className:"w-6 h-6 relative flex items-center justify-center",children:m||h?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-[12px] h-[12px]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.2"}),(0,r.jsx)("path",{d:"M15.5 8.5L8.5 15.5M15.5 15.5L8.5 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}):(0,r.jsx)("svg",{viewBox:"0 0 20 20",className:"w-[10px] h-[6px] text-[#092540]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M5 7l5 5 5-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),m&&(0,r.jsxs)("div",{ref:j,className:"absolute left-0 top-10 z-30 bg-white rounded p-3 w-[280px] shadow-[0px_1px_8px_rgba(9,37,64,0.08),0px_5px_24px_rgba(9,37,64,0.08)] border border-[#D1D6DD]",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsx)("div",{className:"absolute -top-2 left-6 w-0 h-0 border-l-8 border-r-8 border-b-8 border-l-transparent border-r-transparent border-b-[#D1D6DD]"}),(0,r.jsx)("div",{className:"absolute -top-[7px] left-6 w-0 h-0 border-l-7 border-r-7 border-b-7 border-l-transparent border-r-transparent border-b-white"}),(0,r.jsxs)("div",{className:"relative flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:AggregateByBrandsTab_labelsFor(e).include}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{ref:y,className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:AggregateByBrandsTab_placeholdersFor(e).include,value:d.include,onChange:e=>c(t=>({...t,include:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between gap-2 mb-2 w-[257px]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:AggregateByBrandsTab_labelsFor(e).exclude}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:AggregateByBrandsTab_placeholdersFor(e).exclude,value:d.exclude,onChange:e=>c(t=>({...t,exclude:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,r.jsx)("div",{className:"text-[12px] leading-[16px] text-[#B6BEC6]",children:"Price Range"===e||"Views"===e?"Enter numeric values":"Separate terms by comma"}),h&&(0,r.jsx)("button",{className:"text-[12px] text-[#6B7C8C] hover:text-[#195AFE]",onClick:()=>{u(t=>({...t,[e]:{include:"",exclude:""}})),o(null)},children:"Clear"}),(0,r.jsx)("button",{className:"text-[14px] leading-[20px] rounded-[18px] px-4 py-2 ".concat(d.include.trim()||d.exclude.trim()?"bg-[#195AFE] text-white":"bg-[#E6E9EC] text-[#6B7C8C] cursor-not-allowed"),disabled:!(d.include.trim()||d.exclude.trim()),onClick:()=>{(d.include.trim()||d.exclude.trim())&&(u(t=>({...t,[e]:d})),o(null))},children:"Done"})]})]})]},e)})})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.6fr_0.6fr_0.6fr] text-[12px] text-[#3a5166] border-b border-[#E6E9EC] h-12 items-center",style:{fontFamily:"Roboto, sans-serif"},children:[(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start border-r border-[#E6E9EC] px-4 h-full",onClick:()=>handleSort("brand"),children:["Brand Name ",getSortIcon("brand")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("retailerCount"),children:["Number of Retailers ",getSortIcon("retailerCount")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("avgPrice"),children:["Average Price Point ",getSortIcon("avgPrice")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("views"),children:["Views ",getSortIcon("views")]})]}),_.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.6fr_0.6fr_0.6fr] text-[14px] text-[#092540] h-20 items-center border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0 border-right px-4 h-full border-r border-[#E6E9EC]",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white rounded-md border border-[#E6E9EC] overflow-hidden",children:(0,r.jsx)("img",{src:"https://picsum.photos/seed/".concat(encodeURIComponent(e.brand),"/48/48"),alt:e.brand,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,r.jsx)("div",{className:"truncate",title:e.brand,children:e.brand}),(0,r.jsx)("div",{className:"text-[12px] text-[#09254099] flex items-center gap-2",children:(0,r.jsxs)("span",{children:[e.skuCount.toLocaleString()," SKUs"]})})]})]}),(0,r.jsx)("div",{className:"px-4 h-full flex items-center",children:e.retailerCount.toLocaleString()}),(0,r.jsxs)("div",{className:"px-4 h-full flex items-center",children:["$",e.avgPrice.toFixed(2)]}),(0,r.jsx)("div",{className:"px-4 h-full flex items-center",children:AggregateByBrandsTab_abbr(e.views)})]},e.brand))]}),B>1&&(0,r.jsx)("div",{className:"bg-white flex flex-col h-[73px] items-end justify-center relative rounded-bl-md rounded-br-md border-t border-[#CBD1D7]",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-end px-6 py-3 w-full",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>b(1),disabled:1===g,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M11 7l-5 5 5 5M19 7l-5 5 5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===g,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,r.jsxs)("div",{className:"flex gap-1 items-center justify-start",children:[(0,r.jsx)("div",{className:"border border-[#E6E9EC] px-1.5 py-0.5",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:g})}),(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:"out of"}),(0,r.jsx)("div",{className:"px-1 py-0",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:B})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>b(e=>Math.min(B,e+1)),disabled:g===B,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>b(B),disabled:g===B,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M13 17l5-5-5-5M5 17l5-5-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})]})}function AggregateByRetailersTab_abbr(e){let t=Math.abs(e);return t>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":t>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function AggregateByRetailersTab_seededRand(e){let t=e>>>0;return()=>(t=Math.imul(1664525,t)+1013904223>>>0)/4294967296}function AggregateByRetailersTab_titleCase(e){return e.split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function AggregateByRetailersTab_synthesizeSkusFromRetailers(e,t,s){let r=["Adidas","Apple","Nike","Samsung","Sony","Microsoft","Canon","Garmin","Ray-Ban","Bose","Dell","HP","Logitech","Intel"],a=s&&!r.includes(s)?[s,...r]:r,l=["Accessories","Kitchen","Eyewear","Electronics","Stationery","Beauty"],n=[],i=Math.max(1,Math.ceil(t/Math.max(1,e.length)));return e.forEach(e=>{let t=(e.retailerName||"").split("").reduce((e,t)=>e+t.charCodeAt(0),0),r=AggregateByRetailersTab_seededRand(t),o=e.retailerName;for(let d=0;d<i;d++){let i=s&&d%4==0?s:a[Math.floor(r()*a.length)],c=l[Math.floor(r()*l.length)],x=Math.round((8+220*r())*100)/100,u=Math.max(1e3,e.demand_weekly||0)*(.02+.12*r()),p=Math.round(u),m="SKU"+Math.abs(Math.imul(t,d+37)).toString(36).slice(0,8).toUpperCase(),h="".concat(i," ").concat(AggregateByRetailersTab_titleCase(c)," ").concat(Math.floor(10+90*r()));n.push({sku:m,name:h,brand:i,retailer:o,category:c,price:x,views:p})}}),n.sort((e,t)=>t.views-e.views).slice(0,t)}function AggregateByRetailersTab_placeholdersFor(e){switch(e){case"Product Name":return{include:"e.g., Utility Knife, Kitchen",exclude:"e.g., Knife set"};case"Brand":return{include:"e.g., Nike, Adidas",exclude:"e.g., Puma"};case"Retailer":return{include:"e.g., amazon.com, walmart.com",exclude:"e.g., bestbuy.com"};case"Price Range":return{include:"e.g., 20",exclude:"e.g., 200"};case"Views":return{include:"e.g., 1000",exclude:"e.g., 50000"};default:return{include:"Include…",exclude:"Exclude…"}}}function AggregateByRetailersTab_labelsFor(e){switch(e){case"Price Range":case"Views":return{include:"Min",exclude:"Max"};default:return{include:"Include",exclude:"Exclude"}}}function AggregateByRetailersTab_parseNumericInput(e){if(!e)return null;let t=e.trim().toLowerCase();if(!t)return null;let s=1;t.endsWith("k")?s=1e3:t.endsWith("m")?s=1e6:t.endsWith("b")&&(s=1e9);let r=parseFloat(t.replace(/[kmb]$/,""));return isNaN(r)?null:r*s}function AggregateByRetailersTab(e){let{retailers:t,selectedBrandName:s}=e,[n,i]=(0,a.useState)(null),[o,d]=(0,a.useState)({include:"",exclude:""}),[c,x]=(0,a.useState)({}),[u,p]=(0,a.useState)("views"),[m,h]=(0,a.useState)("desc"),[f,g]=(0,a.useState)(1),[b]=(0,a.useState)(10),v=(0,a.useRef)(null),j=(0,a.useRef)(null),y=(0,a.useMemo)(()=>AggregateByRetailersTab_synthesizeSkusFromRetailers(t,350,s),[t,s]),w=(0,a.useMemo)(()=>y.filter(e=>{var t,s,r,a,l,n;let i=c["Product Name"];if((null==i?void 0:i.include)||(null==i?void 0:i.exclude)){let r=(null===(t=i.include)||void 0===t?void 0:t.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],a=(null===(s=i.exclude)||void 0===s?void 0:s.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.name.toLowerCase();if(r.length>0&&!r.some(e=>l.includes(e))||a.length>0&&a.some(e=>l.includes(e)))return!1}let o=c.Brand;if((null==o?void 0:o.include)||(null==o?void 0:o.exclude)){let t=(null===(r=o.include)||void 0===r?void 0:r.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(a=o.exclude)||void 0===a?void 0:a.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],l=e.brand.toLowerCase();if(t.length>0&&!t.some(e=>l.includes(e))||s.length>0&&s.some(e=>l.includes(e)))return!1}let d=c.Retailer;if((null==d?void 0:d.include)||(null==d?void 0:d.exclude)){let t=(null===(l=d.include)||void 0===l?void 0:l.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],s=(null===(n=d.exclude)||void 0===n?void 0:n.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean))||[],r=e.retailer.toLowerCase();if(t.length>0&&!t.some(e=>r.includes(e))||s.length>0&&s.some(e=>r.includes(e)))return!1}let x=c["Price Range"];if((null==x?void 0:x.include)||(null==x?void 0:x.exclude)){let t=AggregateByRetailersTab_parseNumericInput(x.include),s=AggregateByRetailersTab_parseNumericInput(x.exclude);if(null!==t&&!isNaN(t)&&e.price<t||null!==s&&!isNaN(s)&&e.price>s)return!1}let u=c.Views;if((null==u?void 0:u.include)||(null==u?void 0:u.exclude)){let t=AggregateByRetailersTab_parseNumericInput(u.include),s=AggregateByRetailersTab_parseNumericInput(u.exclude);if(null!==t&&!isNaN(t)&&e.views<t||null!==s&&!isNaN(s)&&e.views>s)return!1}return!0}),[y,c]),N=(0,a.useMemo)(()=>{let e={};for(let t of w){e[t.retailer]||(e[t.retailer]={brandSet:new Set,priceSum:0,views:0,skuCount:0});let s=e[t.retailer];s.brandSet.add(t.brand),s.priceSum+=t.price,s.views+=t.views,s.skuCount+=1}let s=Array.from(new Set((t||[]).map(e=>e.retailerName)));return s.map(t=>{let s=e[t];return s?{retailer:t,skuCount:s.skuCount,brandCount:s.brandSet.size,avgPrice:s.skuCount?s.priceSum/s.skuCount:0,views:s.views}:{retailer:t,skuCount:0,brandCount:0,avgPrice:0,views:0}})},[w,t]),C=(0,a.useMemo)(()=>[...N].sort((e,t)=>{let s,r;switch(u){case"retailer":s=e.retailer.toLowerCase(),r=t.retailer.toLowerCase();break;case"brandCount":s=e.brandCount,r=t.brandCount;break;case"avgPrice":s=e.avgPrice,r=t.avgPrice;break;default:s=e.views,r=t.views}return"string"==typeof s&&"string"==typeof r?"asc"===m?s.localeCompare(r):r.localeCompare(s):"asc"===m?s-r:r-s}),[N,u,m]),k=Math.max(1,Math.ceil(C.length/b)),M=(f-1)*b,B=M+b,E=C.slice(M,B),S=s||"My Brand",_=N.length,F=(0,a.useMemo)(()=>{let e=new Set;for(let t of w)t.brand===S&&e.add(t.retailer);return e.size},[w,S]),L=(0,a.useMemo)(()=>{let e=null;for(let t of N)(!e||t.skuCount>e.skuCount)&&(e=t);return(null==e?void 0:e.retailer)||"-"},[N]),R=N.length?N.reduce((e,t)=>e+t.views,0)/N.length:0;(0,a.useEffect)(()=>{function onDocMouseDown(e){v.current&&!v.current.contains(e.target)&&i(null)}function onEsc(e){"Escape"===e.key&&i(null)}return document.addEventListener("mousedown",onDocMouseDown),document.addEventListener("keydown",onEsc),()=>{document.removeEventListener("mousedown",onDocMouseDown),document.removeEventListener("keydown",onEsc)}},[]),(0,a.useEffect)(()=>{n&&j.current&&j.current.focus()},[n]),(0,a.useEffect)(()=>{g(1)},[c]);let handleSort=e=>{u===e?h(e=>"asc"===e?"desc":"asc"):(p(e),h("retailer"===e?"asc":"desc")),g(1)},getSortIcon=e=>u!==e?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#9EA8B2]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===m?(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4l9 16 9-16H3z"})}):(0,r.jsx)("svg",{className:"w-3 h-3 text-[#3A5166]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 20L12 4 3 20h18z"})});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"relative p-4 gap-2.5 flex border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Number of Retailers"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:_}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Count of retailers in filtered results"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Retailers you compete in"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:F}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:["Retailers with at least one ",S," SKU"]})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Leader Retailer by SKUs"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:L}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Retailer with the highest number of SKUs"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-[#F5F8FF] p-4 rounded relative flex flex-col items-center justify-center group",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded border border-[#E6E9EC] pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] tracking-[0.3px] text-[#092540]",children:"Average Retailer Views"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"text-[20px] leading-[24px] text-[#092540] font-medium tracking-[1px]",children:AggregateByRetailersTab_abbr(Math.round(R))}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-[#092540] text-white text-[12px] rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-20",children:"Average views per retailer in filtered results"})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center gap-2 border-b border-[#E6E9EC]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#3A5166]",style:{fontFamily:"DM Sans, sans-serif"},children:"Filter SKUs By:"}),(0,r.jsx)("div",{className:"flex items-center gap-2 h-8",children:["Product Name","Brand","Retailer","Price Range","Views"].map(e=>{var t,s,a,l,u,p;let m=n===e,h=!!((null===(t=c[e])||void 0===t?void 0:t.include)||(null===(s=c[e])||void 0===s?void 0:s.exclude)),f=((null===(l=c[e])||void 0===l?void 0:null===(a=l.include)||void 0===a?void 0:a.split(",").filter(Boolean).length)||0)+((null===(p=c[e])||void 0===p?void 0:null===(u=p.exclude)||void 0===u?void 0:u.split(",").filter(Boolean).length)||0);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"rounded-[40px] pl-3 pr-1 py-1 flex items-center gap-2 text-[12px] leading-[16px] ".concat(m||h?"bg-[#3A5166] text-white":"bg-[#F7F7F8] hover:bg-[#E6E9EC] text-[#092540]"),style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{let t=m?null:e;i(t),d(c[e]||{include:"",exclude:""})},className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e}),h&&(0,r.jsx)("span",{className:"text-[11px] px-1.5 py-0.5 rounded-full ".concat(m?"bg-white/20 text-white":"bg-[#E6E9EC] text-[#092540]"),children:f})]}),(0,r.jsx)("button",{type:"button",onClick:t=>{if(t.stopPropagation(),h)x(t=>({...t,[e]:{include:"",exclude:""}})),i(null);else{let t=m?null:e;i(t),d(c[e]||{include:"",exclude:""})}},className:"w-6 h-6 relative flex items-center justify-center",children:m||h?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-[12px] h-[12px]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.2"}),(0,r.jsx)("path",{d:"M15.5 8.5L8.5 15.5M15.5 15.5L8.5 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}):(0,r.jsx)("svg",{viewBox:"0 0 20 20",className:"w-[10px] h-[6px] text-[#092540]",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M5 7l5 5 5-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),m&&(0,r.jsxs)("div",{ref:v,className:"absolute left-0 top-10 z-30 bg-white rounded p-3 w-[280px] shadow-[0px_1px_8px_rgba(9,37,64,0.08),0px_5px_24px_rgba(9,37,64,0.08)] border border-[#D1D6DD]",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsx)("div",{className:"absolute -top-2 left-6 w-0 h-0 border-l-8 border-r-8 border-b-8 border-l-transparent border-r-transparent border-b-[#D1D6DD]"}),(0,r.jsx)("div",{className:"absolute -top-[7px] left-6 w-0 h-0 border-l-7 border-r-7 border-b-7 border-l-transparent border-r-transparent border-b-white"}),(0,r.jsxs)("div",{className:"relative flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:AggregateByRetailersTab_labelsFor(e).include}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{ref:j,className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:AggregateByRetailersTab_placeholdersFor(e).include,value:o.include,onChange:e=>d(t=>({...t,include:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between gap-2 mb-2 w-[257px]",children:[(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#0B253F] min-w-[64px]",children:AggregateByRetailersTab_labelsFor(e).exclude}),(0,r.jsx)("div",{className:"relative h-10 w-[200px] rounded border border-[#D1D6DD]",children:(0,r.jsx)("input",{className:"absolute inset-0 w-full h-full px-[15px] py-2.5 text-[14px] text-[#0B253F] placeholder-[#9EA8B2] rounded outline-none",placeholder:AggregateByRetailersTab_placeholdersFor(e).exclude,value:o.exclude,onChange:e=>d(t=>({...t,exclude:e.target.value}))})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,r.jsx)("div",{className:"text-[12px] leading-[16px] text-[#B6BEC6]",children:"Price Range"===e||"Views"===e?"Enter numeric values":"Separate terms by comma"}),h&&(0,r.jsx)("button",{className:"text-[12px] text-[#6B7C8C] hover:text-[#195AFE]",onClick:()=>{x(t=>({...t,[e]:{include:"",exclude:""}})),i(null)},children:"Clear"}),(0,r.jsx)("button",{className:"text-[14px] leading-[20px] rounded-[18px] px-4 py-2 ".concat(o.include.trim()||o.exclude.trim()?"bg-[#195AFE] text-white":"bg-[#E6E9EC] text-[#6B7C8C] cursor-not-allowed"),disabled:!(o.include.trim()||o.exclude.trim()),onClick:()=>{(o.include.trim()||o.exclude.trim())&&(x(t=>({...t,[e]:o})),i(null))},children:"Done"})]})]})]},e)})})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.6fr_0.6fr_0.6fr] text-[12px] text-[#3a5166] border-b border-[#E6E9EC] h-12 items-center",style:{fontFamily:"Roboto, sans-serif"},children:[(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start border-r border-[#E6E9EC] px-4 h-full",onClick:()=>handleSort("retailer"),children:["Retailer Name ",getSortIcon("retailer")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("brandCount"),children:["Number of Brands ",getSortIcon("brandCount")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("avgPrice"),children:["Average Price Point ",getSortIcon("avgPrice")]}),(0,r.jsxs)("button",{className:"flex items-center gap-1 hover:text-[#195AFE] cursor-pointer justify-start px-4 h-full",onClick:()=>handleSort("views"),children:["Views ",getSortIcon("views")]})]}),E.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(280px,1.2fr)_0.6fr_0.6fr_0.6fr] text-[14px] text-[#092540] h-20 items-center border-b border-[#E6E9EC]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0 border-right px-4 h-full border-r border-[#E6E9EC]",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white rounded-md border border-[#E6E9EC] overflow-hidden",children:(0,r.jsx)("img",{src:"https://picsum.photos/seed/".concat(encodeURIComponent(e.retailer),"/48/48"),alt:e.retailer,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,r.jsx)("div",{className:"truncate",title:e.retailer,children:e.retailer}),(0,r.jsx)("div",{className:"text-[12px] text-[#09254099] flex items-center gap-2",children:(0,r.jsxs)("span",{children:[e.skuCount.toLocaleString()," SKUs"]})})]})]}),(0,r.jsx)("div",{className:"px-4 h-full flex items-center",children:e.brandCount.toLocaleString()}),(0,r.jsxs)("div",{className:"px-4 h-full flex items-center",children:["$",e.avgPrice.toFixed(2)]}),(0,r.jsx)("div",{className:"px-4 h-full flex items-center",children:AggregateByRetailersTab_abbr(e.views)})]},e.retailer))]}),k>1&&(0,r.jsx)("div",{className:"bg-white flex flex-col h-[73px] items-end justify-center relative rounded-bl-md rounded-br-md border-t border-[#CBD1D7]",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-end px-6 py-3 w-full",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>g(1),disabled:1===f,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M11 7l-5 5 5 5M19 7l-5 5 5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===f,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,r.jsxs)("div",{className:"flex gap-1 items-center justify-start",children:[(0,r.jsx)("div",{className:"border border-[#E6E9EC] px-1.5 py-0.5",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:f})}),(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:"out of"}),(0,r.jsx)("div",{className:"px-1 py-0",children:(0,r.jsx)("div",{className:"font-['Roboto'] text-[12px] leading-[20px] text-[#6B7C8C] text-center",children:k})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-start justify-start",children:[(0,r.jsx)("button",{onClick:()=>g(e=>Math.min(k,e+1)),disabled:f===k,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("button",{onClick:()=>g(k),disabled:f===k,className:"relative size-6 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-[#6B7C8C]",fill:"none",children:(0,r.jsx)("path",{d:"M13 17l5-5-5-5M5 17l5-5-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})]})}function TopSkusTile(e){let{retailers:t,selectedBrandName:s,selectedBrandsHeader:n}=e,[i,o]=(0,a.useState)("none");return(0,r.jsxs)("div",{className:"w-full rounded-md border border-[#E6E9EC] bg-white",style:{fontFamily:"DM Sans, sans-serif"},children:[(0,r.jsx)("div",{className:"relative h-[85px] w-full flex items-start justify-start border-b border-[#E6E9EC]",children:(0,r.jsx)("div",{className:"flex flex-1 items-center justify-between pr-6",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 pl-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"text-[20px] leading-[28px] text-[#092540]",children:"Top performing SKUs"}),(0,r.jsx)(l.Z,{className:"w-4 h-4 text-[#B6BEC6]"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("div",{className:"text-[14px] leading-[20px] text-[#6b7c8c]",children:"350 SKUs"})})]})})}),(0,r.jsx)("div",{className:"w-full border-b border-[#E6E9EC]",children:(0,r.jsxs)("div",{className:"flex w-full",children:[(0,r.jsx)("div",{className:"flex-1 p-6 flex items-center justify-center cursor-pointer transition-colors ".concat("none"===i?"border-b-[3px] border-[#195afe]":"hover:bg-gray-50"),onClick:()=>o("none"),children:(0,r.jsx)("div",{className:"text-[16px] leading-[22px] text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"No aggregation"})}),(0,r.jsx)("div",{className:"w-px bg-[#E6E9EC]"}),(0,r.jsx)("div",{className:"flex-1 p-6 flex items-center justify-center cursor-pointer transition-colors ".concat("brand"===i?"border-b-[3px] border-[#195afe]":"hover:bg-gray-50"),onClick:()=>o("brand"),children:(0,r.jsx)("div",{className:"text-[16px] leading-[22px] text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"Aggregate by Brands"})}),(0,r.jsx)("div",{className:"w-px bg-[#E6E9EC]"}),(0,r.jsx)("div",{className:"flex-1 p-6 flex items-center justify-center cursor-pointer transition-colors ".concat("retailer"===i?"border-b-[3px] border-[#195afe]":"hover:bg-gray-50"),onClick:()=>o("retailer"),children:(0,r.jsx)("div",{className:"text-[16px] leading-[22px] text-[#092540]",style:{fontFamily:"DM Sans, sans-serif"},children:"Aggregate by Retailers"})})]})}),(()=>{switch(i){case"brand":return(0,r.jsx)(AggregateByBrandsTab,{retailers:t,selectedBrandName:s,selectedBrandsHeader:n});case"retailer":return(0,r.jsx)(AggregateByRetailersTab,{retailers:t,selectedBrandName:s});default:return(0,r.jsx)(NoAggregationTab,{retailers:t,selectedBrandName:s})}})()]})}},6691:function(e,t,s){s.d(t,{a:function(){return pickRetailerMixInsight}});let sum=e=>e&&e.length?e.reduce((e,t)=>e+t,0):0,fmtPct1=e=>"".concat((100*e).toFixed(1),"%"),fmtPp=e=>"".concat(e>=0?"+":"−").concat(Math.abs(100*e).toFixed(1),"pp");function delta(e,t){if(void 0!==t)return e-t}function avgWeekly(e,t){let s=sum(e);return t>0?s/t:0}function pickRetailerMixInsight(e,t){var s,r,a,l,n,i,o;let d=null!==(a=null===(r=e[0])||void 0===r?void 0:null===(s=r.current)||void 0===s?void 0:s.length)&&void 0!==a?a:0,c=e.reduce((e,t)=>e+sum(t.current),0),x=e.reduce((e,t)=>e+sum(t.prevPop),0),u=e.reduce((e,t)=>e+sum(t.prevYoy),0),p=e.map(e=>{let t=sum(e.current),s=sum(e.prevPop),r=sum(e.prevYoy),a=c>0?t/c:0,l=x>0&&e.prevPop?s/x:void 0,n=u>0&&e.prevYoy?r/u:void 0,i=delta(a,l),o=delta(a,n);return{retailer:e.retailer,sNow:a,sPop:l,sYoy:n,dPop:i,dYoy:o,avg:avgWeekly(e.current,d)}}),m=(null==t?void 0:t.eligible)?p.filter(e=>t.eligible.has(e.retailer)):p,h=m.filter(e=>e.avg>=1e3),f=h.length?h:m,by=(e,t,s)=>e.slice().sort((e,r)=>{let a=t(r)-t(e);return 0!==a?a:s?s(e,r):0})[0],material=e=>void 0!==e&&Math.abs(e)>=.01,g=f.filter(e=>{let t=void 0!==e.sPop&&e.sPop<=.005&&e.sNow>=.02,s=void 0!==e.sYoy&&e.sYoy<=.005&&e.sNow>=.02;return t||s});if(g.length){let e=by(g,e=>e.sNow,(e,t)=>t.avg-e.avg);return{retailer:e.retailer,title:"New in the mix: ".concat(e.retailer),text:"Now <strong>".concat(fmtPct1(e.sNow),"</strong> of brand views after <strong>~0%</strong> previously; most notable new entrant this period."),tags:{...void 0!==e.dPop?{pop:"".concat(fmtPp(e.dPop)," PoP")}:{},...void 0!==e.dYoy?{yoy:"".concat(fmtPp(e.dYoy)," YoY")}:{}}}}let b=f.filter(e=>{let t=void 0!==e.sPop&&e.sNow<=.005&&e.sPop>=.02,s=void 0!==e.sYoy&&e.sNow<=.005&&e.sYoy>=.02;return t||s});if(b.length){let e=by(b,e=>{var t,s;return Math.max(null!==(t=e.sPop)&&void 0!==t?t:0,null!==(s=e.sYoy)&&void 0!==s?s:0)},(e,t)=>t.avg-e.avg),t=Math.max(null!==(l=e.sPop)&&void 0!==l?l:0,null!==(n=e.sYoy)&&void 0!==n?n:0);return{retailer:e.retailer,title:"Dropped from the mix: ".concat(e.retailer),text:"Now <strong>~0%</strong> of brand views (was <strong>".concat(fmtPct1(t),"</strong>); effectively absent this period."),tags:{...void 0!==e.dPop?{pop:"".concat(fmtPp(e.dPop)," PoP")}:{},...void 0!==e.dYoy?{yoy:"".concat(fmtPp(e.dYoy)," YoY")}:{}}}}let v=f.filter(e=>material(e.dPop)||material(e.dYoy));if(v.length){let e=by(v,e=>{var t,s;return Math.max(Math.abs(null!==(t=e.dPop)&&void 0!==t?t:0),Math.abs(null!==(s=e.dYoy)&&void 0!==s?s:0))},(e,t)=>t.sNow-e.sNow||t.avg-e.avg),t=Math.max(null!==(i=e.dPop)&&void 0!==i?i:-1/0,null!==(o=e.dYoy)&&void 0!==o?o:-1/0)>=.01,s=t?"Share rising on ".concat(e.retailer):"Share declining on ".concat(e.retailer),r=t?"Now <strong>".concat(fmtPct1(e.sNow),"</strong> of brand views — the largest percentage-point gain among retailers."):"Now <strong>".concat(fmtPct1(e.sNow),"</strong> of brand views — the steepest percentage-point drop in the set.");return{retailer:e.retailer,title:s,text:r,tags:{...void 0!==e.dPop?{pop:"".concat(fmtPp(e.dPop)," PoP")}:{},...void 0!==e.dYoy?{yoy:"".concat(fmtPp(e.dYoy)," YoY")}:{}}}}let j=by(f,e=>e.sNow,(e,t)=>t.avg-e.avg);return{retailer:j.retailer,title:"Mix stable — ".concat(j.retailer," leads"),text:"<strong>".concat(j.retailer,"</strong> holds <strong>").concat(fmtPct1(j.sNow),"</strong> of brand views with only minor movement versus both periods."),tags:{...void 0!==j.dPop?{pop:"".concat(fmtPp(j.dPop)," PoP")}:{},...void 0!==j.dYoy?{yoy:"".concat(fmtPp(j.dYoy)," YoY")}:{}}}}}}]);